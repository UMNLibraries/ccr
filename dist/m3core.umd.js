!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.m3core=e():t.m3core=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=248)}([function(t,e,n){var r=n(1);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){r(t,e,n[e])})}return t}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){(function(e){var r;t.exports=function t(e,n,o){function i(u,s){if(!n[u]){if(!e[u]){var c="function"==typeof r&&r;if(!s&&c)return r(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=n[u]={exports:{}};e[u][0].call(h.exports,function(t){var n=e[u][1][t];return i(n||t)},h,h.exports,t,e,n,o)}return n[u].exports}for(var a="function"==typeof r&&r,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,n,r){(function(t){var e,n;!function(t){t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}(e||(e={})),(n=t).HTTPStatusCode||(n.HTTPStatusCode=e)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1),function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(h||(h={})),function(t){var e=function(){function t(t,e){this.start=t,this.end=e}return t.prototype.getLength=function(){return this.end-this.start},t}();t.Duration=e}(h||(h={}));var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.bookmarking=function(){return new e(e.BOOKMARKING.toString())},e.prototype.classifying=function(){return new e(e.CLASSIFYING.toString())},e.prototype.commenting=function(){return new e(e.COMMENTING.toString())},e.prototype.describing=function(){return new e(e.DESCRIBING.toString())},e.prototype.editing=function(){return new e(e.EDITING.toString())},e.prototype.highlighting=function(){return new e(e.HIGHLIGHTING.toString())},e.prototype.identifying=function(){return new e(e.IDENTIFYING.toString())},e.prototype.linking=function(){return new e(e.LINKING.toString())},e.prototype.moderating=function(){return new e(e.MODERATING.toString())},e.prototype.painting=function(){return new e(e.PAINTING.toString())},e.prototype.questioning=function(){return new e(e.QUESTIONING.toString())},e.prototype.replying=function(){return new e(e.REPLYING.toString())},e.prototype.tagging=function(){return new e(e.TAGGING.toString())},e.prototype.transcribing=function(){return new e(e.TRANSCRIBING.toString())},e.BOOKMARKING=new e("oa:bookmarking"),e.CLASSIFYING=new e("oa:classifying"),e.COMMENTING=new e("oa:commenting"),e.DESCRIBING=new e("oa:describing"),e.EDITING=new e("oa:editing"),e.HIGHLIGHTING=new e("oa:highlighting"),e.IDENTIFYING=new e("oa:identifying"),e.LINKING=new e("oa:linking"),e.MODERATING=new e("oa:moderating"),e.PAINTING=new e("sc:painting"),e.QUESTIONING=new e("oa:questioning"),e.REPLYING=new e("oa:replying"),e.TAGGING=new e("oa:tagging"),e.TRANSCRIBING=new e("oad:transcribing"),e}(t.StringValue);t.AnnotationMotivation=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.autoadvance=function(){return new e(e.AUTOADVANCE.toString())},e.prototype.nonav=function(){return new e(e.NONAV.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.AUTOADVANCE=new e("auto-advance"),e.NONAV=new e("no-nav"),e.PAGED=new e("paged"),e}(t.StringValue);t.Behavior=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.annotation=function(){return new e(e.ANNOTATION.toString())},e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.prototype.sequence=function(){return new e(e.SEQUENCE.toString())},e.ANNOTATION=new e("annotation"),e.CANVAS=new e("canvas"),e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e.SEQUENCE=new e("sequence"),e}(t.StringValue);t.IIIFResourceType=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.manuscript=function(){return new e(e.MANUSCRIPT.toString())},e.prototype.monograph=function(){return new e(e.MONOGRAPH.toString())},e.EMPTY=new e(""),e.MANUSCRIPT=new e("manuscript"),e.MONOGRAPH=new e("monograph"),e}(t.StringValue);t.ManifestType=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.doc=function(){return new e(e.DOC.toString())},e.prototype.docx=function(){return new e(e.DOCX.toString())},e.PDF=new e("application/pdf"),e.DOC=new e("application/msword"),e.DOCX=new e("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),e}(t.StringValue);t.RenderingFormat=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.jpg=function(){return new e(e.JPG.toString())},e.prototype.mp4=function(){return new e(e.MP4.toString())},e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.threejs=function(){return new e(e.THREEJS.toString())},e.prototype.webm=function(){return new e(e.WEBM.toString())},e.JPG=new e("image/jpeg"),e.MP4=new e("video/mp4"),e.PDF=new e("application/pdf"),e.THREEJS=new e("application/vnd.threejs+json"),e.WEBM=new e("video/webm"),e}(t.StringValue);t.MediaType=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.choice=function(){return new e(e.CHOICE.toString())},e.prototype.document=function(){return new e(e.DOCUMENT.toString())},e.prototype.image=function(){return new e(e.IMAGE.toString())},e.prototype.movingimage=function(){return new e(e.MOVINGIMAGE.toString())},e.prototype.physicalobject=function(){return new e(e.PHYSICALOBJECT.toString())},e.prototype.sound=function(){return new e(e.SOUND.toString())},e.prototype.text=function(){return new e(e.TEXT.toString())},e.CANVAS=new e("canvas"),e.CHOICE=new e("choice"),e.DOCUMENT=new e("document"),e.IMAGE=new e("image"),e.MOVINGIMAGE=new e("movingimage"),e.PHYSICALOBJECT=new e("physicalobject"),e.SOUND=new e("sound"),e.TEXT=new e("textualbody"),e}(t.StringValue);t.ResourceType=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.auth1Clickthrough=function(){return new e(e.AUTH1CLICKTHROUGH.toString())},e.prototype.auth1External=function(){return new e(e.AUTH1EXTERNAL.toString())},e.prototype.auth1Kiosk=function(){return new e(e.AUTH1KIOSK.toString())},e.prototype.auth1Login=function(){return new e(e.AUTH1LOGIN.toString())},e.prototype.auth1Logout=function(){return new e(e.AUTH1LOGOUT.toString())},e.prototype.auth1Probe=function(){return new e(e.AUTH1PROBE.toString())},e.prototype.auth1Token=function(){return new e(e.AUTH1TOKEN.toString())},e.prototype.autoComplete=function(){return new e(e.AUTOCOMPLETE.toString())},e.prototype.iiif1ImageLevel1=function(){return new e(e.IIIF1IMAGELEVEL1.toString())},e.prototype.iiif1ImageLevel2=function(){return new e(e.IIIF1IMAGELEVEL2.toString())},e.prototype.iiif2ImageLevel1=function(){return new e(e.IIIF2IMAGELEVEL1.toString())},e.prototype.iiif2ImageLevel2=function(){return new e(e.IIIF2IMAGELEVEL2.toString())},e.prototype.ixif=function(){return new e(e.IXIF.toString())},e.prototype.login=function(){return new e(e.AUTHLOGIN.toString())},e.prototype.clickThrough=function(){return new e(e.AUTHCLICKTHROUGH.toString())},e.prototype.restricted=function(){return new e(e.AUTHRESTRICTED.toString())},e.prototype.logout=function(){return new e(e.AUTHLOGOUT.toString())},e.prototype.otherManifestations=function(){return new e(e.OTHERMANIFESTATIONS.toString())},e.prototype.search=function(){return new e(e.SEARCH.toString())},e.prototype.stanfordIIIFImageCompliance1=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIFImageCompliance2=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIFImageConformance1=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIFImageConformance2=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE2.toString())},e.prototype.stanfordIIIF1ImageCompliance1=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIF1ImageCompliance2=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIF1ImageConformance1=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIF1ImageConformance2=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE2.toString())},e.prototype.token=function(){return new e(e.AUTHTOKEN.toString())},e.prototype.trackingExtensions=function(){return new e(e.TRACKINGEXTENSIONS.toString())},e.prototype.uiExtensions=function(){return new e(e.UIEXTENSIONS.toString())},e.prototype.printExtensions=function(){return new e(e.PRINTEXTENSIONS.toString())},e.prototype.shareExtensions=function(){return new e(e.SHAREEXTENSIONS.toString())},e.STANFORDIIIFIMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level0"),e.STANFORDIIIFIMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level1"),e.STANFORDIIIFIMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level2"),e.STANFORDIIIFIMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level0"),e.STANFORDIIIFIMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level1"),e.STANFORDIIIFIMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level2"),e.STANFORDIIIF1IMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"),e.STANFORDIIIF1IMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1"),e.STANFORDIIIF1IMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2"),e.STANFORDIIIF1IMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0"),e.STANFORDIIIF1IMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1"),e.STANFORDIIIF1IMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2"),e.IIIF1IMAGELEVEL0=new e("http://iiif.io/api/image/1/level0.json"),e.IIIF1IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/1/profiles/level0.json"),e.IIIF1IMAGELEVEL1=new e("http://iiif.io/api/image/1/level1.json"),e.IIIF1IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/1/profiles/level1.json"),e.IIIF1IMAGELEVEL2=new e("http://iiif.io/api/image/1/level2.json"),e.IIIF1IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/1/profiles/level2.json"),e.IIIF2IMAGELEVEL0=new e("http://iiif.io/api/image/2/level0.json"),e.IIIF2IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/2/profiles/level0.json"),e.IIIF2IMAGELEVEL1=new e("http://iiif.io/api/image/2/level1.json"),e.IIIF2IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/2/profiles/level1.json"),e.IIIF2IMAGELEVEL2=new e("http://iiif.io/api/image/2/level2.json"),e.IIIF2IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/2/profiles/level2.json"),e.AUTHCLICKTHROUGH=new e("http://iiif.io/api/auth/0/login/clickthrough"),e.AUTHLOGIN=new e("http://iiif.io/api/auth/0/login"),e.AUTHLOGOUT=new e("http://iiif.io/api/auth/0/logout"),e.AUTHRESTRICTED=new e("http://iiif.io/api/auth/0/login/restricted"),e.AUTHTOKEN=new e("http://iiif.io/api/auth/0/token"),e.AUTH1CLICKTHROUGH=new e("http://iiif.io/api/auth/1/clickthrough"),e.AUTH1EXTERNAL=new e("http://iiif.io/api/auth/1/external"),e.AUTH1KIOSK=new e("http://iiif.io/api/auth/1/kiosk"),e.AUTH1LOGIN=new e("http://iiif.io/api/auth/1/login"),e.AUTH1LOGOUT=new e("http://iiif.io/api/auth/1/logout"),e.AUTH1PROBE=new e("http://iiif.io/api/auth/1/probe"),e.AUTH1TOKEN=new e("http://iiif.io/api/auth/1/token"),e.AUTOCOMPLETE=new e("http://iiif.io/api/search/0/autocomplete"),e.SEARCH=new e("http://iiif.io/api/search/0/search"),e.TRACKINGEXTENSIONS=new e("http://universalviewer.io/tracking-extensions-profile"),e.UIEXTENSIONS=new e("http://universalviewer.io/ui-extensions-profile"),e.PRINTEXTENSIONS=new e("http://universalviewer.io/print-extensions-profile"),e.SHAREEXTENSIONS=new e("http://universalviewer.io/share-extensions-profile"),e.OTHERMANIFESTATIONS=new e("http://iiif.io/api/otherManifestations.json"),e.IXIF=new e("http://wellcomelibrary.org/ld/ixif/0/alpha.json"),e}(t.StringValue);t.ServiceProfile=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.leftToRight=function(){return new e(e.LEFTTORIGHT.toString())},e.prototype.rightToLeft=function(){return new e(e.RIGHTTOLEFT.toString())},e.prototype.topToBottom=function(){return new e(e.TOPTOBOTTOM.toString())},e.prototype.bottomToTop=function(){return new e(e.BOTTOMTOTOP.toString())},e.LEFTTORIGHT=new e("left-to-right"),e.RIGHTTOLEFT=new e("right-to-left"),e.TOPTOBOTTOM=new e("top-to-bottom"),e.BOTTOMTOTOP=new e("bottom-to-top"),e}(t.StringValue);t.ViewingDirection=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.continuous=function(){return new e(e.CONTINUOUS.toString())},e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.individuals=function(){return new e(e.INDIVIDUALS.toString())},e.prototype.nonPaged=function(){return new e(e.NONPAGED.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.prototype.top=function(){return new e(e.TOP.toString())},e.CONTINUOUS=new e("continuous"),e.EMPTY=new e(""),e.INDIVIDUALS=new e("individuals"),e.NONPAGED=new e("non-paged"),e.PAGED=new e("paged"),e.TOP=new e("top"),e}(t.StringValue);t.ViewingHint=e}(h||(h={})),function(t){var e=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return t.prototype.getProperty=function(t){var e=null;return this.__jsonld&&((e=this.__jsonld[t])||(e=this.__jsonld["@"+t])),e},t}();t.JSONLDResource=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t)||this;return r.options=n,r}return i(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){var e=this.getProperty("label");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getDefaultLabel=function(){return t.LanguageMap.getValue(this.getLabel())},n.prototype.getMetadata=function(){var e=this.getProperty("metadata"),n=[];if(!e)return n;for(var r=0;r<e.length;r++){var o=e[r],i=new t.LabelValuePair(this.options.locale);i.parse(o),n.push(i)}return n},n.prototype.getRendering=function(t){var e=this.getRenderings();"string"!=typeof t&&(t=t.toString());for(var n=0;n<e.length;n++){var r=e[n];if(r.getFormat().toString()===t)return r}return null},n.prototype.getRenderings=function(){var e,n=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return n;Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var o=e[r];n.push(new t.Rendering(o,this.options))}return n},n.prototype.getService=function(e){return t.Utils.getService(this,e)},n.prototype.getServices=function(){return t.Utils.getServices(this)},n.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new t.Thumbnail(e,this.options):null},n.prototype.isAnnotation=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.ANNOTATION.toString()},n.prototype.isCanvas=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.CANVAS.toString()},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.isRange=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.RANGE.toString()},n.prototype.isSequence=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.SEQUENCE.toString()},n}(t.JSONLDResource);t.ManifestResource=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(e.toLowerCase()):null},n.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var n=0;n<this.__jsonld.resources.length;n++){var r=this.__jsonld.resources[n],o=new t.Annotation(r,this.options);e.push(o)}return e},n.prototype.getType=function(){var e=this.getProperty("type");return e?new t.ResourceType(t.Utils.normaliseType(e)):null},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},n.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},n}(t.ManifestResource);t.Resource=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getCanonicalImageUri=function(e){var n,r=null,o="default",i=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])r=this.externalResource.data["@id"],i||(i=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(o="native");else{var a=this.getImages();if(a&&a.length){var u=a[0].getResource(),s=u.getServices();if(i||(i=u.getWidth()),s.length){var c=s[0];r=c.id,o=t.Utils.getImageQuality(c.getProfile())}else if(i===u.getWidth())return u.id}if(!r){var f=this.getProperty("thumbnail");if(f){if("string"==typeof f)return f;if(f["@id"])return f["@id"];if(f.length)return f[0].id}}}return n=i+",",r&&r.endsWith("/")&&(r=r.substr(0,r.length-1)),[r,"full",n,0,o+".jpg"].join("/")},n.prototype.getMaxDimensions=function(){var e,n=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter(function(t){return t.maxWidth})[0])&&(n=new t.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),n},n.prototype.getContent=function(){var e=[],n=this.__jsonld.items||this.__jsonld.content;if(!n)return e;var r=null;if(n.length&&(r=new t.AnnotationPage(n[0],this.options)),!r)return e;for(var o=r.getItems(),i=0;i<o.length;i++){var a=o[i],u=new t.Annotation(a,this.options);e.push(u)}return e},n.prototype.getDuration=function(){return this.getProperty("duration")},n.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var n=0;n<this.__jsonld.images.length;n++){var r=this.__jsonld.images[n],o=new t.Annotation(r,this.options);e.push(o)}return e},n.prototype.getIndex=function(){return this.getProperty("index")},n.prototype.getOtherContent=function(){var e=this,n=Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")],r=n.filter(function(t){return t&&(e=t["@type"],n="sc:AnnotationList","string"==typeof e&&"string"==typeof n&&e.toLowerCase()==e.toLowerCase());var e,n}).map(function(n,r){return new t.AnnotationList(n.label||"Annotation list "+r,n,e.options)}).map(function(t){return t.load()});return Promise.all(r)},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n}(t.Resource);t.Canvas=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;r.index=-1,r.isLoaded=!1;var o={defaultLabel:"-",locale:"en-GB",resource:r,pessimisticAccessControl:!1};return r.options=Object.assign(o,n),r}return i(n,e),n.prototype.getAttribution=function(){console.warn("getAttribution will be deprecated, use getRequiredStatement instead.");var e=this.getProperty("attribution");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getDescription=function(){var e=this.getProperty("description");return e?t.LanguageMap.parse(e,this.options.locale):[]},n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLogo=function(){var t=this.getProperty("logo");return t?"string"==typeof t?t:(Array.isArray(t)&&t.length&&(t=t[0]),t["@id"]||t.id):null},n.prototype.getLicense=function(){return t.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},n.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},n.prototype.getRelated=function(){return this.getProperty("related")},n.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},n.prototype.getDefaultTree=function(){return this.defaultTree=new t.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},n.prototype.getRequiredStatement=function(){var e=null,n=this.getProperty("requiredStatement");if(n)(e=new t.LabelValuePair(this.options.locale)).parse(n);else{var r=this.getAttribution();r&&((e=new t.LabelValuePair(this.options.locale)).value=r)}return e},n.prototype.isCollection=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.COLLECTION.toString()},n.prototype.isManifest=function(){return this.getIIIFResourceType().toString()===t.IIIFResourceType.MANIFEST.toString()},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var o=e.options;o.navDate=e.getNavDate();var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),t.Utils.loadResource(i).then(function(r){e.parentLabel=t.LanguageMap.getValue(e.getLabel(),o.locale);var i=t.Deserialiser.parse(r,o);(e=Object.assign(e,i)).index=o.index,n(e)})}})},n}(t.ManifestResource);t.IIIFResource=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;if(r.index=0,r._allRanges=null,r.items=[],r._topRanges=[],r.__jsonld.structures&&r.__jsonld.structures.length)for(var o=r._getTopRanges(),i=0;i<o.length;i++){var a=o[i];r._parseRanges(a,String(i))}return r}return i(n,e),n.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new t.Canvas(e,this.options)),e},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),!this.isLoaded)return this.defaultTree;var n=this.getTopRanges();return n.length&&n[0].getTree(this.defaultTree),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var n=0;n<this.__jsonld.structures.length;n++){var r=this.__jsonld.structures[n];r.viewingHint===t.ViewingHint.TOP.toString()&&e.push(r)}if(!e.length){var o={};o.ranges=this.__jsonld.structures,e.push(o)}}return e},n.prototype.getTopRanges=function(){return this._topRanges},n.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var n=this.__jsonld.structures[e];if(n["@id"]===t||n.id===t)return n}return null},n.prototype._parseRanges=function(e,n,r){var o,i=null;if("string"==typeof e&&(i=e,e=this._getRangeById(i)),e){(o=new t.Range(e,this.options)).parentRange=r,o.path=n,r?r.items.push(o):this._topRanges.push(o);var a=e.items||e.members;if(a)for(var u=0;u<a.length;u++){var s=a[u];if(s["@type"]&&"sc:range"===s["@type"].toLowerCase()||s.type&&"range"===s.type.toLowerCase())this._parseRanges(s,n+"/"+u,o);else if(s["@type"]&&"sc:canvas"===s["@type"].toLowerCase()||s.type&&"canvas"===s.type.toLowerCase()){o.canvases||(o.canvases=[]);var c=s.id||s["@id"];o.canvases.push(c)}}else if(e.ranges)for(u=0;u<e.ranges.length;u++)this._parseRanges(e.ranges[u],n+"/"+u,o)}else console.warn("Range:",i,"does not exist")},n.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var t=this.getTopRanges(),e=function(e){var r=t[e];r.id&&n._allRanges.push(r);var o=function(t,e){t.add(e);var n=e.getRanges();return n.length?n.reduce(o,t):t},i=Array.from(r.getRanges().reduce(o,new Set));n._allRanges=n._allRanges.concat(i)},n=this,r=0;r<t.length;r++)e(r);return this._allRanges},n.prototype.getRangeById=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}return null},n.prototype.getRangeByPath=function(t){for(var e=this.getAllRanges(),n=0;n<e.length;n++){var r=e[n];if(r.path===t)return r}return null},n.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var n=0;n<e.length;n++){var r=e[n],o=new t.Sequence(r,this.options);this.items.push(o)}else if(this.__jsonld.items){o=new t.Sequence(this.__jsonld.items,this.options);this.items.push(o)}return this.items},n.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},n.prototype.getTotalSequences=function(){return this.getSequences().length},n.prototype.getManifestType=function(){var e=this.getService(t.ServiceProfile.UIEXTENSIONS);return e?new t.ManifestType(e.getProperty("manifestType")):new t.ManifestType("")},n.prototype.getTrackingLabel=function(){var e=this.getService(t.ServiceProfile.TRACKINGEXTENSIONS);return e?e.getProperty("trackingLabel"):""},n.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e.toString()===t.ViewingHint.PAGED.toString();var n=this.getBehavior();return!!n&&n.toString()===t.Behavior.PAGED.toString()},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n}(t.IIIFResource);t.Manifest=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._collections=null,r._manifests=null,t.__collection=r,r}return i(n,e),n.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter(function(t){return t.isCollection()})},n.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter(function(t){return t.isManifest()})},n.prototype.getCollectionByIndex=function(t){var e=this.getCollections();if(!e[t])throw new Error("Collection index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getManifestByIndex=function(t){var e=this.getManifests();if(!e[t])throw new Error("Manifest index is outside range of array");var n=e[t];return n.options.index=t,n.load()},n.prototype.getTotalCollections=function(){return this.getCollections().length},n.prototype.getTotalManifests=function(){return this.getManifests().length},n.prototype.getTotalItems=function(){return this.items.length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):t.ViewingDirection.LEFTTORIGHT},n.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),this._parseManifests(this),this._parseCollections(this),t.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},n.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var n=0;n<e.getManifests().length;n++){var r=e.getManifests()[n],o=r.getDefaultTree();o.label=r.parentLabel||t.LanguageMap.getValue(r.getLabel(),this.options.locale)||"manifest "+(n+1),o.navDate=r.getNavDate(),o.data.id=r.id,o.data.type=t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString()),e.defaultTree.addNode(o)}},n.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var n=0;n<e.getCollections().length;n++){var r=e.getCollections()[n],o=r.getDefaultTree();o.label=r.parentLabel||t.LanguageMap.getValue(r.getLabel(),this.options.locale)||"collection "+(n+1),o.navDate=r.getNavDate(),o.data.id=r.id,o.data.type=t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString()),e.defaultTree.addNode(o),this._parseCollections(r)}},n}(t.IIIFResource);t.Collection=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r._ranges=null,r.canvases=null,r.items=[],r}return i(n,e),n.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},n.prototype.getDuration=function(){var e,n;if(this.canvases&&this.canvases.length)for(var r=0;r<this.canvases.length;r++){var o=this.canvases[r],i=t.Utils.getTemporalComponent(o);i&&i.length>1&&(0===r&&(e=Number(i[0])),r===this.canvases.length-1&&(n=Number(i[1])))}else{var a=this.getRanges();for(r=0;r<a.length;r++){var u=a[r].getDuration();u&&(0===r&&(e=u.start),r===a.length-1&&(n=u.end))}}if(void 0!==e&&void 0!==n)return new t.Duration(e,n)},n.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter(function(t){return t.isRange()})},n.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e?new t.Behavior(e):null},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.getTree=function(e){e.data=this,this.treeNode=e;var n=this.getRanges();if(n&&n.length)for(var r=0;r<n.length;r++){var o=n[r],i=new t.TreeNode;e.addNode(i),this._parseTreeNode(i,o)}return t.Utils.generateTreeNodeIds(e),e},n.prototype.spansTime=function(t){var e=this.getDuration();return!!(e&&t>=e.start&&t<=e.end)},n.prototype._parseTreeNode=function(e,n){e.label=t.LanguageMap.getValue(n.getLabel(),this.options.locale),e.data=n,e.data.type=t.Utils.normaliseType(t.TreeNodeType.RANGE.toString()),n.treeNode=e;var r=n.getRanges();if(r&&r.length)for(var o=0;o<r.length;o++){var i=r[o],a=i.getBehavior();if(!a||a.toString()!==t.Behavior.NONAV.toString()){var u=new t.TreeNode;e.addNode(u),this._parseTreeNode(u,i)}}},n}(t.ManifestResource);t.Range=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){return new t.RenderingFormat(this.getProperty("format"))},n}(t.ManifestResource);t.Rendering=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){var r=e.call(this,t,n)||this;return r.items=[],r._thumbnails=null,r}return i(n,e),n.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var n=0;n<e.length;n++){var r=e[n];(o=new t.Canvas(r,this.options)).index=n,this.items.push(o)}else if(this.__jsonld)for(n=0;n<this.__jsonld.length;n++){var o;r=this.__jsonld[n];(o=new t.Canvas(r,this.options)).index=n,this.items.push(o)}return this.items},n.prototype.getCanvasById=function(e){for(var n=0;n<this.getTotalCanvases();n++){var r=this.getCanvasByIndex(n),o=t.Utils.normaliseUrl(r.id);if(t.Utils.normaliseUrl(e)===o)return r}return null},n.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},n.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return null},n.prototype.getCanvasIndexByLabel=function(e,n){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),n&&(e+="r"));for(var r,o,i,a=/(\d*)\D+(\d*)/,u=0;u<this.getTotalCanvases();u++){var s=this.getCanvasByIndex(u);if(t.LanguageMap.getValue(s.getLabel(),this.options.locale)===e)return u;if((r=a.exec(e))&&(o=r[1],(i=r[2])&&new RegExp("^"+o+"\\D+"+i+"$").test(s.getLabel().toString())))return u}return-1},n.prototype.getLastCanvasLabel=function(e){for(var n=this.getTotalCanvases()-1;n>=0;n--){var r=this.getCanvasByIndex(n),o=t.LanguageMap.getValue(r.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(o))return o}else if(o)return o}return this.options.defaultLabel},n.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},n.prototype.getNextPageIndex=function(e,n){var r;if(n){var o=this.getPagedIndices(e),i=this.getViewingDirection();r=i&&i.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?o[0]+1:o[o.length-1]+1}else r=e+1;return r>this.getLastPageIndex()?-1:r},n.prototype.getPagedIndices=function(e,n){var r=[];if(n){r=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var o=this.getViewingDirection();o&&o.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()&&(r=r.reverse())}else r.push(e);return r},n.prototype.getPrevPageIndex=function(e,n){var r;if(n){var o=this.getPagedIndices(e),i=this.getViewingDirection();r=i&&i.toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?o[o.length-1]-1:o[0]-1}else r=e-1;return r},n.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++){if(this.getCanvasByIndex(e).id===t)return e}return 0},n.prototype.getThumbs=function(e,n){console.warn("getThumbs will be deprecated, use getThumbnails instead");for(var r=[],o=this.getTotalCanvases(),i=0;i<o;i++){var a=this.getCanvasByIndex(i),u=new t.Thumb(e,a);r.push(u)}return r},n.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var t=this.getCanvases(),e=0;e<t.length;e++){var n=t[e].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},n.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},n.prototype.getTotalCanvases=function(){return this.getCanvases().length},n.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},n.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},n.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},n.prototype.isFirstCanvas=function(t){return 0===t},n.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},n.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},n.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e.toString()===t.ViewingHint.PAGED.toString()},n.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},n}(t.ManifestResource);t.Sequence=e}(h||(h={})),function(t){var e=function(){function e(){}return e.parse=function(t,e){return"string"==typeof t&&(t=JSON.parse(t)),this.parseJson(t,e)},e.parseJson=function(t,e){var n;if(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"])switch(t["@type"]){case"sc:Collection":n=this.parseCollection(t,e);break;case"sc:Manifest":n=this.parseManifest(t,e);break;default:return null}else switch(t.type){case"Collection":n=this.parseCollection(t,e);break;case"Manifest":n=this.parseManifest(t,e);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,n){var r=new t.Collection(e,n);return r.index=n&&n.index||0,this.parseCollections(r,n),this.parseManifests(r,n),this.parseItems(r,n),r},e.parseCollections=function(t,e){var n;if(t.__jsonld.collections?n=t.__jsonld.collections:t.__jsonld.items&&(n=t.__jsonld.items.filter(function(t){return"collection"===t.type.toLowerCase()})),n)for(var r=0;r<n.length;r++){e&&(e.index=r);var o=this.parseCollection(n[r],e);o.index=r,o.parentCollection=t,t.items.push(o)}},e.parseManifest=function(e,n){return new t.Manifest(e,n)},e.parseManifests=function(t,e){var n;if(t.__jsonld.manifests?n=t.__jsonld.manifests:t.__jsonld.items&&(n=t.__jsonld.items.filter(function(t){return"manifest"===t.type.toLowerCase()})),n)for(var r=0;r<n.length;r++){var o=this.parseManifest(n[r],e);o.index=r,o.parentCollection=t,t.items.push(o)}},e.parseItem=function(t,e){if(t["@type"]){if("sc:manifest"===t["@type"].toLowerCase())return this.parseManifest(t,e);if("sc:collection"===t["@type"].toLowerCase())return this.parseCollection(t,e)}else if(t.type){if("manifest"===t.type.toLowerCase())return this.parseManifest(t,e);if("collection"===t.type.toLowerCase())return this.parseCollection(t,e)}return null},e.parseItems=function(t,e){var n=t.__jsonld.members||t.__jsonld.items;if(n)for(var r=function(r){e&&(e.index=r);var i=o.parseItem(n[r],e);return i?t.items.filter(function(t){return t.id===i.id})[0]?"continue":(i.index=r,i.parentCollection=t,void t.items.push(i)):{value:void 0}},o=this,i=0;i<n.length;i++){var a=r(i);if("object"==typeof a)return a.value}},e}();t.Deserialiser=e;var n=function(){function t(){}return t.serialise=function(t){return""},t}();t.Serialiser=n}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?new t.ServiceProfile(e[0]):new t.ServiceProfile(e)},n.prototype.getConfirmLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},n.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},n.prototype.getFailureDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},n.prototype.getFailureHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},n.prototype.getHeader=function(){return t.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},n.prototype.getServiceLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},n.prototype.getInfoUri=function(){var t=this.id;return t.endsWith("/")||(t+="/"),t+="info.json"},n}(t.ManifestResource);t.Service=e}(h||(h={})),function(t){var e=function(){return function(e,n){this.data=n,this.index=n.index,this.width=e;var r=n.getHeight()/n.getWidth();this.height=r?Math.floor(this.width*r):e,this.uri=n.getCanonicalImageUri(e),this.label=t.LanguageMap.getValue(n.getLabel())}}();t.Thumb=e}(h||(h={})),function(t){var e=function(){function e(t,e){this.label=t,this.data=e||{},this.nodes=[]}return e.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},e.prototype.isCollection=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.COLLECTION.toString())},e.prototype.isManifest=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.MANIFEST.toString())},e.prototype.isRange=function(){return this.data.type===t.Utils.normaliseType(t.TreeNodeType.RANGE.toString())},e}();t.TreeNode=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.COLLECTION=new e("collection"),e.MANIFEST=new e("manifest"),e.RANGE=new e("range"),e}(t.StringValue);t.TreeNodeType=e}(h||(h={}));var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},s=n(65),c=n(127),f=n(29);!function(t){var e=function(){function e(){}return e.getMediaType=function(t){return(t=(t=t.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){var n=e.toString();return n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||n===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2.toString()||n===t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()?"native":"default"},e.getInexactLocale=function(t){return-1!==t.indexOf("-")?t.substr(0,t.indexOf("-")):t},e.getLocalisedValue=function(t,e){if(!Array.isArray(t))return t;for(var n=0;n<t.length;n++){var r=t[n];if(e===r["@language"])return r["@value"]}var o=e.substr(0,e.indexOf("-"));for(n=0;n<t.length;n++){var i=t[n];if(i["@language"]===o)return i["@value"]}return null},e.generateTreeNodeIds=function(t,n){var r;void 0===n&&(n=0),r=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=r;for(var o=0;o<t.nodes.length;o++){var i=t.nodes[o];e.generateTreeNodeIds(i,o)}},e.normaliseType=function(t){return-1!==(t=t.toLowerCase()).indexOf(":")?t.split(":")[1]:t},e.normaliseUrl=function(t){return-1!==(t=t.substr(t.indexOf("://"))).indexOf("#")&&(t=t.split("#")[0]),t},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.isLevel0ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()))},e.isLevel1ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()))},e.isLevel2ImageProfile=function(n){return"string"==typeof n&&(n=new t.ServiceProfile(n)),!!(e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2.toString())||e.normalisedUrlsMatch(n.toString(),t.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()))},e.loadResource=function(t){return new Promise(function(e,n){var r,o=f.parse(t),i={host:o.hostname,port:o.port,path:o.path,method:"GET",withCredentials:!1};switch(o.protocol){case"https:":(r=c.request(i,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})})).on("error",function(t){n(t)}),r.end();break;case"dat:":var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&e(a.response)},a.open("GET",t,!0),a.send();break;default:(r=s.request(i,function(t){var n="";t.on("data",function(t){n+=t}),t.on("end",function(){e(n)})})).on("error",function(t){n(t)}),r.end()}})},e.loadExternalResourcesAuth1=function(t,n,r,o,i,a,u,s){return new Promise(function(c,f){var h=t.map(function(t){return e.loadExternalResourceAuth1(t,n,r,o,i,a,u,s)});Promise.all(h).then(function(){c(t)}).catch(function(t){f(t)})})},e.loadExternalResourceAuth1=function(t,n,r,o,i,s,c,f){return a(this,void 0,void 0,function(){var a;return u(this,function(u){switch(u.label){case 0:return[4,o(t)];case 1:return(a=u.sent())?[4,t.getData(a)]:[3,6];case 2:return u.sent(),t.status!==HTTPStatusCode.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,r,i,s,c,f)];case 4:u.sent(),u.label=5;case 5:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return u.sent(),t.status!==HTTPStatusCode.MOVED_TEMPORARILY&&t.status!==HTTPStatusCode.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,r,i,s,c,f)];case 8:u.sent(),u.label=9;case 9:if(t.status===HTTPStatusCode.OK||t.status===HTTPStatusCode.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}})})},e.doAuthChain=function(t,n,r,o,i,s,c){return a(this,void 0,void 0,function(){var a,f,h,l,p,d,v,y;return u(this,function(u){switch(u.label){case 0:return t.isAccessControlled()?((a=t.externalService)&&(a.options=t.options),(f=t.kioskService)&&(f.options=t.options),(h=t.clickThroughService)&&(h.options=t.options),(l=t.loginService)&&(l.options=t.options),t.isResponseHandled||t.status!==HTTPStatusCode.MOVED_TEMPORARILY?[3,2]:[4,s(t)]):[2,t];case 1:return u.sent(),[2,t];case 2:return p=null,d=null,(p=a)?(d=p,[4,e.attemptResourceWithToken(t,r,p)]):[3,4];case 3:return u.sent(),[2,t];case 4:return(p=f)?(d=p,(v=n(p))?[4,o(v)]:[3,7]):[3,7];case 5:return u.sent(),[4,e.attemptResourceWithToken(t,r,p)];case 6:return u.sent(),[2,t];case 7:return(p=h)?(d=p,[4,i(t,p)]):[3,11];case 8:return(y=u.sent())?[4,o(y)]:[3,11];case 9:return u.sent(),[4,e.attemptResourceWithToken(t,r,p)];case 10:return u.sent(),[2,t];case 11:return(p=l)?(d=p,[4,i(t,p)]):[3,15];case 12:return(y=u.sent())?[4,o(y)]:[3,15];case 13:return u.sent(),[4,e.attemptResourceWithToken(t,r,p)];case 14:return u.sent(),[2,t];case 15:return d&&c(t,d),[2]}})})},e.attemptResourceWithToken=function(e,n,r){return a(this,void 0,void 0,function(){var o,i;return u(this,function(a){switch(a.label){case 0:return(o=r.getService(t.ServiceProfile.AUTH1TOKEN.toString()))?[4,n(e,o)]:[3,3];case 1:return(i=a.sent())&&i.accessToken?[4,e.getData(i)]:[3,3];case 2:return a.sent(),[2,e];case 3:return[2]}})})},e.loadExternalResourcesAuth09=function(t,n,r,o,i,a,u,s,c,f){return new Promise(function(h,l){var p=t.map(function(t){return e.loadExternalResourceAuth09(t,n,r,o,i,a,u,s,c,f)});Promise.all(p).then(function(){h(t)}).catch(function(t){l(t)})})},e.loadExternalResourceAuth09=function(t,n,r,o,i,a,u,s,c,f){return new Promise(function(h,l){f&&f.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?(h(r(t)),h(o(t))):i(t).then(function(){a(t,!0).then(function(n){t.getData(n).then(function(){h(c(t))}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))})}).catch(function(t){l(e.createInternalServerError(t))}):h(t)}).catch(function(t){l(e.createInternalServerError(t))}):s(t,n).then(function(f){f?t.getData(f).then(function(){t.status===HTTPStatusCode.OK?h(c(t)):e.authorize(t,n,r,o,i,a,u,s).then(function(){h(c(t))}).catch(function(t){l(e.createAuthorizationFailedError())})}).catch(function(t){l(e.createAuthorizationFailedError())}):e.authorize(t,n,r,o,i,a,u,s).then(function(){h(c(t))}).catch(function(t){l(e.createAuthorizationFailedError())})}).catch(function(t){l(e.createAuthorizationFailedError())})})},e.createError=function(t,e){var n=new Error;return n.message=e,n.name=t,n},e.createAuthorizationFailedError=function(){return e.createError(manifesto.StatusCodes.AUTHORIZATION_FAILED.toString(),"Authorization failed")},e.createRestrictedError=function(){return e.createError(manifesto.StatusCodes.RESTRICTED.toString(),"Restricted")},e.createInternalServerError=function(t){return e.createError(manifesto.StatusCodes.INTERNAL_SERVER_ERROR.toString(),t)},e.authorize=function(t,n,r,o,i,a,u,s){return new Promise(function(c,f){t.getData().then(function(){t.isAccessControlled()?s(t,n).then(function(s){s?t.getData(s).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,n,r,o,i,a,u,c,f)}).catch(function(t){f(e.createInternalServerError(t))}):a(t,!1).then(function(s){s?u(t,s,n).then(function(){t.getData(s).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,n,r,o,i,a,u,c,f)}).catch(function(t){f(e.createInternalServerError(t))})}).catch(function(t){f(e.createInternalServerError(t))}):e.showAuthInteraction(t,n,r,o,i,a,u,c,f)})}).catch(function(t){f(e.createInternalServerError(t))}):c(t)})})},e.showAuthInteraction=function(t,n,r,o,i,a,u,s,c){t.status!==HTTPStatusCode.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?r(t).then(function(){a(t,!0).then(function(r){u(t,r,n).then(function(){t.getData(r).then(function(){s(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):i(t).then(function(){a(t,!0).then(function(r){u(t,r,n).then(function(){t.getData(r).then(function(){s(t)}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}).catch(function(t){c(e.createInternalServerError(t))})}):s(t)},e.getService=function(t,e){var n=this.getServices(t);"string"!=typeof e&&(e=e.toString());for(var r=0;r<n.length;r++){var o=n[r];if(o.getProfile().toString()===e)return o}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,"@id",n)},e.traverseAndFind=function(t,n,r){if(t.hasOwnProperty(n)&&t[n]===r)return t;for(var o=0;o<Object.keys(t).length;o++)if("object"==typeof t[Object.keys(t)[o]]){var i=e.traverseAndFind(t[Object.keys(t)[o]],n,r);if(null!=i)return i}},e.getServices=function(e){var n,r=[];if(!(n=e.__jsonld?e.__jsonld.service:e.service))return r;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o];if("string"==typeof i){var a=this.getResourceById(e.options.resource,i);a&&r.push(new t.Service(a.__jsonld||a,e.options))}else r.push(new t.Service(i,e.options))}return r},e.getTemporalComponent=function(t){var e=/t=([^&]+)/g.exec(t),n=null;return e&&e[1]&&(n=e[1].split(",")),n},e}();t.Utils=e}(h||(h={})),function(t){var e=function(){return function(t,e){Array.isArray(t)?1===t.length?this.value=t[0]:this.value=t.join("<br/>"):this.value=t,this.locale=e}}();t.Language=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return i(n,e),n.parse=function(e,n){var r,o=[];if(!e)return o;if(Array.isArray(e))for(var i=0;i<e.length;i++){var a=e[i];r="string"==typeof a?new t.Language(a,n):new t.Language(a["@value"],a["@language"]||n),o.push(r)}else{if("string"==typeof e)return r=new t.Language(e,n),o.push(r),o;e["@value"]?(r=new t.Language(e["@value"],e["@language"]||n),o.push(r)):Object.keys(e).forEach(function(n){if(!e[n].length)throw new Error("language must have a value");r=new t.Language(e[n],n),o.push(r)})}return o},n.getValue=function(e,n){if(e.length){if(n){var r=e.filter(function(e){return e.locale===n||t.Utils.getInexactLocale(e.locale)===t.Utils.getInexactLocale(n)})[0];if(r)return r.value}return e[0].value}return null},n}(Array);t.LanguageMap=e}(h||(h={})),function(t){var e=function(){function e(t){this.defaultLocale=t}return e.prototype.parse=function(e){this.resource=e,this.label=t.LanguageMap.parse(this.resource.label,this.defaultLocale),this.value=t.LanguageMap.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?t.LanguageMap.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var n=this;if(this.label&&this.label.length){var r=this.label.filter(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)})[0];r&&(r.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label&&this.label.length&&this.label[0].locale&&(e=this.label[0].locale),t.LanguageMap.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var n=this;if(this.value&&this.value.length){var r=this.value.filter(function(e){return e.locale===n.defaultLocale||e.locale===t.Utils.getInexactLocale(n.defaultLocale)})[0];r&&(r.value=e)}},e}();t.LabelValuePair=e}(h||(h={})),function(t){var e=function(){return function(t,e){this.width=t,this.height=e}}();t.Size=e}(h||(h={})),e.manifesto=e.Manifesto=t.exports={AnnotationMotivation:new h.AnnotationMotivation,Behavior:new h.Behavior,IIIFResourceType:new h.IIIFResourceType,LabelValuePair:h.LabelValuePair,Language:h.Language,LanguageMap:h.LanguageMap,ManifestType:new h.ManifestType,MediaType:new h.MediaType,RenderingFormat:new h.RenderingFormat,ResourceType:new h.ResourceType,ServiceProfile:new h.ServiceProfile,Size:h.Size,TreeNode:h.TreeNode,TreeNodeType:new h.TreeNodeType,Utils:h.Utils,ViewingDirection:new h.ViewingDirection,ViewingHint:new h.ViewingHint,Annotation:h.Annotation,AnnotationBody:h.AnnotationBody,AnnotationList:h.AnnotationList,AnnotationPage:h.AnnotationPage,Canvas:h.Canvas,Collection:h.Collection,Duration:h.Duration,Manifest:h.Manifest,Range:h.Range,Sequence:h.Sequence,Service:h.Service,Thumbnail:h.Thumbnail,Thumb:h.Thumb,StatusCodes:{AUTHORIZATION_FAILED:1,FORBIDDEN:2,INTERNAL_SERVER_ERROR:3,RESTRICTED:4},create:function(t,e){return h.Deserialiser.parse(t,e)},loadManifest:function(t){return h.Utils.loadResource(t)}};i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getBody=function(){var e=[],n=this.getProperty("body");if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++){if((a=n[r]).items)for(var o=0;o<a.items.length;o++){var i=a.items[o];e.push(new t.AnnotationBody(i,this.options))}else e.push(new t.AnnotationBody(a,this.options))}else if(n.items)for(r=0;r<n.items.length;r++){var a=n.items[r];e.push(new t.AnnotationBody(a,this.options))}else e.push(new t.AnnotationBody(n,this.options));return e},n.prototype.getMotivation=function(){var e=this.getProperty("motivation");return e?new t.AnnotationMotivation(e.toLowerCase()):null},n.prototype.getOn=function(){return this.getProperty("on")},n.prototype.getTarget=function(){return this.getProperty("target")},n.prototype.getResource=function(){return new t.Resource(this.getProperty("resource"),this.options)},n}(t.ManifestResource);t.Annotation=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n){return e.call(this,t,n)||this}return i(n,e),n.prototype.getFormat=function(){var e=this.getProperty("format");return e?new t.MediaType(t.Utils.getMediaType(e)):null},n.prototype.getType=function(){return this.getProperty("type")?new t.ResourceType(t.Utils.normaliseType(this.getProperty("type"))):null},n.prototype.getWidth=function(){return this.getProperty("width")},n.prototype.getHeight=function(){return this.getProperty("height")},n}(t.ManifestResource);t.AnnotationBody=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(e){function n(t,n,r){var o=e.call(this,n)||this;return o.label=t,o.options=r,o}return i(n,e),n.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(t.Utils.normaliseType(this.getProperty("type")))},n.prototype.getLabel=function(){return this.label},n.prototype.getResources=function(){var e=this;return this.getProperty("resources").map(function(n){return new t.Annotation(n,e.options)})},n.prototype.load=function(){var e=this;return new Promise(function(n,r){if(e.isLoaded)n(e);else{var o=e.__jsonld.id;o||(o=e.__jsonld["@id"]),t.Utils.loadResource(o).then(function(t){e.__jsonld=JSON.parse(t),e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,n(e)}).catch(r)}})},n}(t.JSONLDResource);t.AnnotationList=e}(h||(h={}));i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e.prototype.getItems=function(){return this.getProperty("items")},e}(t.ManifestResource);t.AnnotationPage=e}(h||(h={}));var h;i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return i(e,t),e}(t.Resource);t.Thumbnail=e}(h||(h={}))}).call(this,n(5))},function(t,e,n){var r=n(220);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(169),o=n(170);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var u=0;u<16;++u)e[i+u]=a[u];return e||o(a)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(128),o=n(129),i=n(130);t.exports=function(t){return r(t)||o(t)||i()}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(79),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";const r="undefined"==typeof URL?n(29).URL:URL,o=(t,e)=>e.some(e=>e instanceof RegExp?e.test(t):e===t),i=(t,e)=>{if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},Reflect.has(e,"normalizeHttps"))throw new Error("options.normalizeHttps is renamed to options.forceHttp");if(Reflect.has(e,"normalizeHttp"))throw new Error("options.normalizeHttp is renamed to options.forceHttps");if(Reflect.has(e,"stripFragment"))throw new Error("options.stripFragment is renamed to options.stripHash");const n=(t=t.trim()).startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const i=new r(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&"https:"===i.protocol&&(i.protocol="http:"),e.forceHttps&&"http:"===i.protocol&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash&&(i.hash=""),i.pathname&&(i.pathname=i.pathname.replace(/((?!:).|^)\/{2,}/g,(t,e)=>/^(?!\/)/g.test(e)?`${e}/`:"/")),i.pathname&&(i.pathname=decodeURI(i.pathname)),!0===e.removeDirectoryIndex&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let t=i.pathname.split("/");const n=t[t.length-1];o(n,e.removeDirectoryIndex)&&(t=t.slice(0,t.length-1),i.pathname=t.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.([a-z\-\d]{2,63})\.([a-z.]{2,5})$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const t of[...i.searchParams.keys()])o(t,e.removeQueryParameters)&&i.searchParams.delete(t);return e.sortQueryParameters&&i.searchParams.sort(),e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,"")),t=i.toString(),!e.removeTrailingSlash&&"/"!==i.pathname||""!==i.hash||(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};t.exports=i,t.exports.default=i},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();t.exports=e=r.fetch,e.default=r.fetch.bind(r),e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){var r=n(135),o=n(140);t.exports=function(t,e){var n=o(t,e);return r(n)?n:void 0}},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var s,c=[],f=!1,h=-1;function l(){f&&s&&(f=!1,s.length?c=s.concat(c):h=-1,c.length&&p())}function p(){if(!f){var t=u(l);f=!0;for(var e=c.length;e;){for(s=c,c=[];++h<e;)s&&s[h].run();h=-1,e=c.length}s=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(31),o=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var i=n(24);i.inherits=n(15);var a=n(70),u=n(74);i.inherits(h,a);for(var s=o(u.prototype),c=0;c<s.length;c++){var f=s[c];h.prototype[f]||(h.prototype[f]=u.prototype[f])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),u.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){var r=n(20),o=n(136),i=n(137),a="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?u:a:s&&s in Object(t)?o(t):i(t)}},function(t,e,n){var r=n(8).Symbol;t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";n.r(e),n.d(e,"createStore",function(){return u}),n.d(e,"combineReducers",function(){return c}),n.d(e,"bindActionCreators",function(){return h}),n.d(e,"applyMiddleware",function(){return v}),n.d(e,"compose",function(){return d}),n.d(e,"__DO_NOT_USE__ActionTypes",function(){return i});var r=n(63),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function a(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function u(t,e,n){var o;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(u)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var s=t,c=e,f=[],h=f,l=!1;function p(){h===f&&(h=f.slice())}function d(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function v(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return p(),h.push(t),function(){if(e){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,p();var n=h.indexOf(t);h.splice(n,1)}}}function y(t){if(!a(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,c=s(c,t)}finally{l=!1}for(var e=f=h,n=0;n<e.length;n++){(0,e[n])()}return t}return y({type:i.INIT}),(o={dispatch:y,subscribe:v,getState:d,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");s=t,y({type:i.REPLACE})}})[r.a]=function(){var t,e=v;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(d())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t},o}function s(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];0,"function"==typeof t[o]&&(n[o]=t[o])}var a,u=Object.keys(n);try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){a=t}return function(t,e){if(void 0===t&&(t={}),a)throw a;for(var r=!1,o={},i=0;i<u.length;i++){var c=u[i],f=n[c],h=t[c],l=f(h,e);if(void 0===l){var p=s(c,e);throw new Error(p)}o[c]=l,r=r||l!==h}return r?o:t}}function f(t,e){return function(){return e(t.apply(this,arguments))}}function h(t,e){if("function"==typeof t)return f(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(t),r={},o=0;o<n.length;o++){var i=n[o],a=t[i];"function"==typeof a&&(r[i]=f(a,e))}return r}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function d(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=e.map(function(t){return t(o)});return p({},n,{dispatch:r=d.apply(void 0,i)(n.dispatch)})}}}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(115),o=n(116),i=n(66);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=l(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=u(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(s.isBuffer(e)){var n=0|p(e.length);return 0===(t=u(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?u(t,0):l(t,e);if("Buffer"===e.type&&i(e.data))return l(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function f(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(f(e),t=u(t,e<0?0:0|p(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e){var n=e.length<0?0:0|p(e.length);t=u(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return b(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:_(t,e,n,r,o);if("number"==typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):_(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(t,e,n,r,o){var i,a=1,u=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var f=-1;for(i=n;i<u;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===s)return f*a}else-1!==f&&(i-=i-f),f=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var h=!0,l=0;l<s;l++)if(c(t,i+l)!==c(e,l)){h=!1;break}if(h)return i}return-1}function I(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function w(t,e,n,r){return B(V(e,t.length-n),t,n,r)}function E(t,e,n,r){return B(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function m(t,e,n,r){return E(t,e,n,r)}function O(t,e,n,r){return B(G(e),t,n,r)}function S(t,e,n,r){return B(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function b(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,u,s,c=t[o],f=null,h=c>239?4:c>223?3:c>191?2:1;if(o+h<=n)switch(h){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(s=(31&c)<<6|63&i)>127&&(f=s);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(f=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(f=s)}null===f?(f=65533,h=1):f>65535&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return c(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return function(t,e,n,r){return f(e),e<=0?u(t,e):void 0!==n?"string"==typeof r?u(t,e).fill(n,r):u(t,e).fill(n):u(t,e)}(null,t,e,n)},s.allocUnsafe=function(t){return h(null,t)},s.allocUnsafeSlow=function(t){return h(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=s.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),u=Math.min(i,a),c=this.slice(r,o),f=t.slice(e,n),h=0;h<u;++h)if(c[h]!==f[h]){i=c[h],a=f[h];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return I(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return m(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=W(t[i]);return o}function M(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function L(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function j(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function D(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return i||D(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return i||D(t,0,n,8),o.write(t,e,n,r,52,8),n+8}s.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},s.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},s.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},s.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):j(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);x(this,t,e,n,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);x(this,t,e,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):j(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):j(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=s.isBuffer(t)?t:V(new s(t,r).toString()),u=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%u]}return this};var k=/[^+\/0-9A-Za-z-_]/g;function W(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(k,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(5))},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(23).Buffer)},function(t,e,n){var r=n(85),o=n(51);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),a?o(n,c,f):r(n,c,f)}return n}},function(t,e,n){var r=n(86),o=n(183),i=n(38);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(61),o=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}},function(t,e,n){var r=n(91),o=n(222),i=n(99),a=n(7);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},function(t,e,n){"use strict";var r=n(109),o=n(110);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=I,e.resolve=function(t,e){return I(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?I(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=I(t));return t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),f=["'"].concat(c),h=["%","/","?",";","#"].concat(f),l=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(111);function I(t,e,n){if(t&&o.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),u=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(u);c[0]=c[0].replace(/\\/g,"/");var I=t=c.join(u);if(I=I.trim(),!n&&1===t.split("#").length){var w=s.exec(I);if(w)return this.path=I,this.href=I,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(I);if(E){var m=(E=E[0]).toLowerCase();this.protocol=m,I=I.substr(E.length)}if(n||E||I.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===I.substr(0,2);!O||E&&y[E]||(I=I.substr(2),this.slashes=!0)}if(!y[E]&&(O||E&&!g[E])){for(var S,b,A=-1,T=0;T<l.length;T++){-1!==(R=I.indexOf(l[T]))&&(-1===A||R<A)&&(A=R)}-1!==(b=-1===A?I.lastIndexOf("@"):I.lastIndexOf("@",A))&&(S=I.slice(0,b),I=I.slice(b+1),this.auth=decodeURIComponent(S)),A=-1;for(T=0;T<h.length;T++){var R;-1!==(R=I.indexOf(h[T]))&&(-1===A||R<A)&&(A=R)}-1===A&&(A=I.length),this.host=I.slice(0,A),I=I.slice(A),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var C=this.hostname.split(/\./),M=(T=0,C.length);T<M;T++){var P=C[T];if(P&&!P.match(p)){for(var x="",L=0,j=P.length;L<j;L++)P.charCodeAt(L)>127?x+="x":x+=P[L];if(!x.match(p)){var D=C.slice(0,T),U=C.slice(T+1),F=P.match(d);F&&(D.push(F[1]),U.unshift(F[2])),U.length&&(I="/"+U.join(".")+I),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=r.toASCII(this.hostname));var k=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+k,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==I[0]&&(I="/"+I))}if(!v[m])for(T=0,M=f.length;T<M;T++){var V=f[T];if(-1!==I.indexOf(V)){var G=encodeURIComponent(V);G===V&&(G=escape(V)),I=I.split(V).join(G)}}var B=I.indexOf("#");-1!==B&&(this.hash=I.substr(B),I=I.slice(0,B));var H=I.indexOf("?");if(-1!==H?(this.search=I.substr(H),this.query=I.substr(H+1),e&&(this.query=_.parse(this.query)),I=I.slice(0,H)):e&&(this.search="",this.query={}),I&&(this.pathname=I),g[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var z=this.search||"";this.path=k+z}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=_.stringify(this.query));var u=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(u=u.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(I(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var u=r[a];n[u]=this[u]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),c=0;c<s.length;c++){var f=s[c];"protocol"!==f&&(n[f]=t[f])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!g[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var p=h[l];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||y[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var v=n.pathname||"",_=n.search||"";n.path=v+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var I=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=w||I||n.host&&t.pathname,m=E,O=n.pathname&&n.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===O[0]?O[0]=n.host:O.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),E=E&&(""===d[0]||""===O[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,O=d;else if(d.length)O||(O=[]),O.pop(),O=O.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(S)n.hostname=n.host=O.shift(),(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift());return n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!O.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var b=O.slice(-1)[0],A=(n.host||t.host||O.length>1)&&("."===b||".."===b)||""===b,T=0,R=O.length;R>=0;R--)"."===(b=O[R])?O.splice(R,1):".."===b?(O.splice(R,1),T++):T&&(O.splice(R,1),T--);if(!E&&!m)for(;T--;T)O.unshift("..");!E||""===O[0]||O[0]&&"/"===O[0].charAt(0)||O.unshift(""),A&&"/"!==O.join("/").substr(-1)&&O.push("");var N,C=""===O[0]||O[0]&&"/"===O[0].charAt(0);S&&(n.hostname=n.host=C?"":O.length?O.shift():"",(N=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=N.shift(),n.host=n.hostname=N.shift()));return(E=E||n.host&&O.length)&&!C&&O.unshift(""),O.length?n.pathname=O.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,o)});default:for(i=new Array(u-1),a=0;a<i.length;)i[a++]=arguments[a];return e.nextTick(function(){t.apply(null,i)})}}}:t.exports=e}).call(this,n(17))},function(t,e,n){var r=n(23),o=r.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return o(t,e,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(o,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return o(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=o(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){var r=n(16)(Object,"create");t.exports=r},function(t,e,n){var r=n(145),o=n(146),i=n(147),a=n(148),u=n(149);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(45);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(151);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){var r=n(78),o=n(49);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){var r=n(192),o=n(46),i=n(193),a=n(194),u=n(195),s=n(19),c=n(80),f=c(r),h=c(o),l=c(i),p=c(a),d=c(u),v=s;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case f:return"[object DataView]";case h:return"[object Map]";case l:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,n){var r=n(7),o=n(60),i=n(209),a=n(212);t.exports=function(t,e){return r(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,n){t.exports=function(){"use strict";var t=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var n=Object.prototype.toString.call(t);return"[object RegExp]"===n||"[object Date]"===n||function(t){return t.$$typeof===e}(t)}(t)},e="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?a((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function r(t,e,r){return t.concat(e).map(function(t){return n(t,r)})}function o(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return t.propertyIsEnumerable(e)}):[]}(t))}function i(t,e,r){var i={};return r.isMergeableObject(t)&&o(t).forEach(function(e){i[e]=n(t[e],r)}),o(e).forEach(function(o){r.isMergeableObject(e[o])&&t[o]?i[o]=function(t,e){if(!e.customMerge)return a;var n=e.customMerge(t);return"function"==typeof n?n:a}(o,r)(t[o],e[o],r):i[o]=n(e[o],r)}),i}function a(e,o,a){(a=a||{}).arrayMerge=a.arrayMerge||r,a.isMergeableObject=a.isMergeableObject||t;var u=Array.isArray(o),s=Array.isArray(e),c=u===s;return c?u?a.arrayMerge(e,o,a):i(e,o,a):n(o,a)}return a.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(t,n){return a(t,n,e)},{})},a}()},function(t,e,n){var r=n(247);t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},function(t,e){t.exports=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o}},function(t,e,n){var r=n(132),o=n(150),i=n(152),a=n(153),u=n(154);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var r=n(16)(n(8),"Map");t.exports=r},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e){t.exports=function(t){return t}},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){var r=n(34),o=n(172),i=n(173),a=n(174),u=n(175),s=n(176);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,n){var r=n(84);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(180),o=n(9),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,n){(function(t){var r=n(8),o=n(181),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,u=a&&a.exports===i?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;t.exports=s}).call(this,n(30)(t))},function(t,e,n){(function(t){var r=n(79),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,u=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=u}).call(this,n(30)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(91),o=n(92),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return i.call(t,e)}))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){var r=n(89)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(97);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){var r=n(7),o=n(61),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var r=n(19),o=n(9),i="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||o(t)&&r(t)==i}},function(t,e,n){var r=n(40),o=n(27);t.exports=function(t,e){for(var n=0,i=(e=r(e,t)).length;null!=t&&n<i;)t=t[o(e[n++])];return n&&n==i?t:void 0}},function(t,e,n){"use strict";(function(t,r){var o,i=n(105);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(i.a)(o);e.a=a}).call(this,n(5),n(108)(t))},function(t,e,n){var r=n(51),o=n(244),i=Object.prototype.hasOwnProperty,a=o(function(t,e,n){i.call(t,n)?t[n].push(e):r(t,n,[e])});t.exports=a},function(t,e,n){(function(t){var r=n(114),o=n(68),i=n(125),a=n(126),u=n(29),s=e;s.request=function(e,n){e="string"==typeof e?u.parse(e):i(e);var o=-1===t.location.protocol.search(/^https?:$/)?"http:":"",a=e.protocol||o,s=e.hostname||e.host,c=e.port,f=e.path||"/";s&&-1!==s.indexOf(":")&&(s="["+s+"]"),e.url=(s?a+"//"+s:"")+(c?":"+c:"")+f,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var h=new r(e);return n&&h.on("response",n),h},s.get=function(t,e){var n=s.request(t,e);return n.end(),n},s.ClientRequest=r,s.IncomingMessage=o.IncomingMessage,s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.globalAgent=new s.Agent,s.STATUS_CODES=a,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,n(5))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){e.fetch=u(t.fetch)&&u(t.ReadableStream),e.writableStream=u(t.WritableStream),e.abortController=u(t.AbortController),e.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),e.blobConstructor=!0}catch(t){}var n;function r(){if(void 0!==n)return n;if(t.XMLHttpRequest){n=new t.XMLHttpRequest;try{n.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){n=null}}else n=null;return n}function o(t){var e=r();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var i=void 0!==t.ArrayBuffer,a=i&&u(t.ArrayBuffer.prototype.slice);function u(t){return"function"==typeof t}e.arraybuffer=e.fetch||i&&o("arraybuffer"),e.msstream=!e.fetch&&a&&o("ms-stream"),e.mozchunkedarraybuffer=!e.fetch&&i&&o("moz-chunked-arraybuffer"),e.overrideMimeType=e.fetch||!!r()&&u(r().overrideMimeType),e.vbArray=u(t.VBArray),n=null}).call(this,n(5))},function(t,e,n){(function(t,r,o){var i=n(67),a=n(15),u=n(69),s=e.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=e.IncomingMessage=function(e,n,a,s){var c=this;if(u.Readable.call(c),c._mode=a,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===a){if(c._fetchResponse=n,c.url=n.url,c.statusCode=n.status,c.statusMessage=n.statusText,n.headers.forEach(function(t,e){c.headers[e.toLowerCase()]=t,c.rawHeaders.push(e,t)}),i.writableStream){var f=new WritableStream({write:function(t){return new Promise(function(e,n){c._destroyed?n():c.push(new r(t))?e():c._resumeFetch=e})},close:function(){o.clearTimeout(s),c._destroyed||c.push(null)},abort:function(t){c._destroyed||c.emit("error",t)}});try{return void n.body.pipeTo(f).catch(function(t){o.clearTimeout(s),c._destroyed||c.emit("error",t)})}catch(t){}}var h=n.body.getReader();!function t(){h.read().then(function(e){if(!c._destroyed){if(e.done)return o.clearTimeout(s),void c.push(null);c.push(new r(e.value)),t()}}).catch(function(t){o.clearTimeout(s),c._destroyed||c.emit("error",t)})}()}else{if(c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText,e.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===c.headers[n]&&(c.headers[n]=[]),c.headers[n].push(e[2])):void 0!==c.headers[n]?c.headers[n]+=", "+e[2]:c.headers[n]=e[2],c.rawHeaders.push(e[1],e[2])}}),c._charset="x-user-defined",!i.overrideMimeType){var l=c.rawHeaders["mime-type"];if(l){var p=l.match(/;\s*charset=([^;])(;|$)/);p&&(c._charset=p[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(c,u.Readable),c.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},c.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==s.DONE)break;try{n=new o.VBArray(e.responseBody).toArray()}catch(t){}if(null!==n){t.push(new r(n));break}case"text":try{n=e.responseText}catch(e){t._mode="text:vbarray";break}if(n.length>t._pos){var i=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new r(i.length),u=0;u<i.length;u++)a[u]=255&i.charCodeAt(u);t.push(a)}else t.push(i,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==s.DONE||!e.response)break;n=e.response,t.push(new r(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==s.LOADING||!n)break;t.push(new r(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==s.LOADING)break;var c=new o.MSStreamReader;c.onprogress=function(){c.result.byteLength>t._pos&&(t.push(new r(new Uint8Array(c.result.slice(t._pos)))),t._pos=c.result.byteLength)},c.onload=function(){t.push(null)},c.readAsArrayBuffer(n)}t._xhr.readyState===s.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,n(17),n(23).Buffer,n(5))},function(t,e,n){(e=t.exports=n(70)).Stream=e,e.Readable=e,e.Writable=n(74),e.Duplex=n(18),e.Transform=n(76),e.PassThrough=n(123)},function(t,e,n){"use strict";(function(e,r){var o=n(31);t.exports=I;var i,a=n(66);I.ReadableState=_;n(71).EventEmitter;var u=function(t,e){return t.listeners(e).length},s=n(72),c=n(32).Buffer,f=e.Uint8Array||function(){};var h=n(24);h.inherits=n(15);var l=n(117),p=void 0;p=l&&l.debuglog?l.debuglog("stream"):function(){};var d,v=n(118),y=n(73);h.inherits(I,s);var g=["error","close","destroy","pause","resume"];function _(t,e){t=t||{};var r=e instanceof(i=i||n(18));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,a=t.readableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(a||0===a)?a:u,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(75).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function I(t){if(i=i||n(18),!(this instanceof I))return new I(t);this._readableState=new _(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function w(t,e,n,r,o){var i,a=t._readableState;null===e?(a.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,S(t)}(t,a)):(o||(i=function(t,e){var n;r=e,c.isBuffer(r)||r instanceof f||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(a,e)),i?t.emit("error",i):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):A(t,a)):E(t,a,e,!1))):r||(a.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&S(t)),A(t,e)}Object.defineProperty(I.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),I.prototype.destroy=y.destroy,I.prototype._undestroy=y.undestroy,I.prototype._destroy=function(t,e){this.push(null),e(t)},I.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=c.from(t,e),e=""),n=!0),w(this,t,e,!1,n)},I.prototype.unshift=function(t){return w(this,t,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){return d||(d=n(75).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var m=8388608;function O(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=m?t=m:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?o.nextTick(b,t):b(t))}function b(t){p("emit readable"),t.emit("readable"),C(t)}function A(t,e){e.readingMore||(e.readingMore=!0,o.nextTick(T,t,e))}function T(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function R(t){p("readable nexttick read 0"),t.read(0)}function N(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,o=n.data;t-=o.length;for(;n=n.next;){var i=n.data,a=t>i.length?i.length:t;if(a===i.length?o+=i:o+=i.slice(0,t),0===(t-=a)){a===i.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=i.slice(a));break}++r}return e.length-=r,o}(t,e):function(t,e){var n=c.allocUnsafe(t),r=e.head,o=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var i=r.data,a=t>i.length?i.length:t;if(i.copy(n,n.length-t,0,a),0===(t-=a)){a===i.length?(++o,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=i.slice(a));break}++o}return e.length-=o,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function P(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,o.nextTick(x,e,t))}function x(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function L(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}I.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):S(this),null;if(0===(t=O(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,o=e.needReadable;return p("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",o=!0),e.ended||e.reading?p("reading or ended",o=!1):o&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=O(n,e))),null===(r=t>0?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},I.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,p("pipe count=%d opts=%j",i.pipesCount,e);var s=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?f:I;function c(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",g),t.removeListener("finish",_),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",c),n.removeListener("end",f),n.removeListener("end",I),n.removeListener("data",v),l=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function f(){p("onend"),t.end()}i.endEmitted?o.nextTick(s):n.once("end",s),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&u(t,"data")&&(e.flowing=!0,C(t))}}(n);t.on("drain",h);var l=!1;var d=!1;function v(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==L(i.pipes,t))&&!l&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function y(e){p("onerror",e),I(),t.removeListener("error",y),0===u(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",_),I()}function _(){p("onfinish"),t.removeListener("close",g),I()}function I(){p("unpipe"),n.unpipe(t)}return n.on("data",v),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",g),t.once("finish",_),t.emit("pipe",n),i.flowing||(p("pipe resume"),n.resume()),t},I.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,o=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<o;i++)r[i].emit("unpipe",this,n);return this}var a=L(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},I.prototype.on=function(t,e){var n=s.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):o.nextTick(R,this))}return n},I.prototype.addListener=I.prototype.on,I.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,o.nextTick(N,t,e))}(this,t)),this},I.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){(p("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o)||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var i=0;i<g.length;i++)t.on(g[i],this.emit.bind(this,g[i]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),I._fromList=M}).call(this,n(5),n(17))},function(t,e,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var s=10;function c(t){return void 0===t._maxListeners?u.defaultMaxListeners:t._maxListeners}function f(t,e,n,r){var o,i,a,u;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=c(t))>0&&a.length>o&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,u=s,console&&console.warn&&console.warn(u)}return t}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,i(this.listener,this.target,t))}.bind(r);return o.listener=n,r.wrapFn=o,o}function l(t,e,n){var r=t._events;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):d(o,o.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function d(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},u.prototype.getMaxListeners=function(){return c(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(void 0===s)return!1;if("function"==typeof s)i(s,this,e);else{var c=s.length,f=d(s,c);for(n=0;n<c;++n)i(f[n],this,e)}return!0},u.prototype.addListener=function(t,e){return f(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return f(this,t,e,!0)},u.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return l(this,t,!0)},u.prototype.rawListeners=function(t){return l(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},u.prototype.listenerCount=p,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){t.exports=n(71).EventEmitter},function(t,e,n){"use strict";var r=n(31);function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,i=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return i||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";(function(e,r,o){var i=n(31);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var o=r.callback;e.pendingcb--,o(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=_;var u,s=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:i.nextTick;_.WritableState=g;var c=n(24);c.inherits=n(15);var f={deprecate:n(122)},h=n(72),l=n(32).Buffer,p=o.Uint8Array||function(){};var d,v=n(73);function y(){}function g(t,e){u=u||n(18),t=t||{};var r=e instanceof u;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var o=t.highWaterMark,c=t.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(c||0===c)?c:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,o=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,o){--e.pendingcb,n?(i.nextTick(o,r),i.nextTick(S,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(o(r),t._writableState.errorEmitted=!0,t.emit("error",r),S(t,e))}(t,n,r,e,o);else{var a=m(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?s(w,t,n,a,o):w(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function _(t){if(u=u||n(18),!(d.call(_,this)||this instanceof u))return new _(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function I(t,e,n,r,o,i,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,i,e.onwrite),e.sync=!1}function w(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),S(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),i=e.corkedRequestsFree;i.entry=n;for(var u=0,s=!0;n;)o[u]=n,n.isBuf||(s=!1),n=n.next,u+=1;o.allBuffers=s,I(t,e,!0,e.length,o,"",i.finish),e.pendingcb++,e.lastBufferedRequest=null,i.next?(e.corkedRequestsFree=i.next,i.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,h=n.callback;if(I(t,e,!1,e.objectMode?1:c.length,c,f,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function m(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function O(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),S(t,e)})}function S(t,e){var n=m(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,i.nextTick(O,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}c.inherits(_,h),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(_,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===_&&(t&&t._writableState instanceof g)}})):d=function(t){return t instanceof this},_.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_.prototype.write=function(t,e,n){var r,o=this._writableState,a=!1,u=!o.objectMode&&(r=t,l.isBuffer(r)||r instanceof p);return u&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),u?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof n&&(n=y),o.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),i.nextTick(e,n)}(this,n):(u||function(t,e,n,r){var o=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),i.nextTick(r,a),o=!1),o}(this,o,t,n))&&(o.pendingcb++,a=function(t,e,n,r,o,i){if(!n){var a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n));return e}(e,r,o);r!==a&&(n=!0,o="buffer",r=a)}var u=e.objectMode?1:r.length;e.length+=u;var s=e.length<e.highWaterMark;s||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:o,isBuf:n,callback:i,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else I(t,e,!1,u,r,o,i);return s}(this,o,u,t,e,n)),a},_.prototype.cork=function(){this._writableState.corked++},_.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},_.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(_.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},_.prototype._writev=null,_.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,S(t,e),n&&(e.finished?i.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),_.prototype.destroy=v.destroy,_.prototype._undestroy=v.undestroy,_.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(17),n(120).setImmediate,n(5))},function(t,e,n){"use strict";var r=n(32).Buffer,o=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===o||!o(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=s,this.end=c,e=4;break;case"utf8":this.fillLast=u,e=4;break;case"base64":this.text=f,this.end=h,e=3;break;default:return this.write=l,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function u(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function s(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function l(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=i,i.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},i.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},i.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var o=a(e[r]);if(o>=0)return o>0&&(t.lastNeed=o-1),o;if(--r<n||-2===o)return 0;if((o=a(e[r]))>=0)return o>0&&(t.lastNeed=o-2),o;if(--r<n||-2===o)return 0;if((o=a(e[r]))>=0)return o>0&&(2===o?o=0:t.lastNeed=o-3),o;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},i.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=a;var r=n(18),o=n(24);function i(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",u)}function u(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}o.inherits=n(15),o.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var o=this._readableState;(r.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r=n(44),o=n(155),i=n(156);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e,n){var r=n(19),o=n(21),i="[object AsyncFunction]",a="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";t.exports=function(t){if(!o(t))return!1;var e=r(t);return e==a||e==u||e==i||e==s}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(5))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(164),o=Math.max;t.exports=function(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=n(s),r(t,this,c)}}},function(t,e,n){var r=n(165),o=n(167)(r);t.exports=o},function(t,e,n){var r=n(16),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,n){var r=n(51),o=n(45),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(179),o=n(52),i=n(7),a=n(53),u=n(87),s=n(88),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),h=!n&&!f&&a(t),l=!n&&!f&&!h&&s(t),p=n||f||h||l,d=p?r(t.length,String):[],v=d.length;for(var y in t)!e&&!c.call(t,y)||p&&("length"==y||h&&("offset"==y||"parent"==y)||l&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||u(y,v))||d.push(y);return d}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(182),o=n(37),i=n(54),a=i&&i.isTypedArray,u=a?o(a):r;t.exports=u},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(86),o=n(186),i=n(38);t.exports=function(t){return i(t)?r(t,!0):o(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(57),o=n(58),i=n(56),a=n(92),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,n){var r=n(95),o=n(56),i=n(26);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(57),o=n(7);t.exports=function(t,e,n){var i=e(t);return o(t)?i:r(i,n(t))}},function(t,e,n){var r=n(95),o=n(93),i=n(90);t.exports=function(t){return r(t,i,o)}},function(t,e,n){var r=n(8).Uint8Array;t.exports=r},function(t,e,n){var r=n(223),o=n(226)(r);t.exports=o},function(t,e,n){var r=n(227),o=n(236),i=n(48),a=n(7),u=n(241);t.exports=function(t){return"function"==typeof t?t:null==t?i:"object"==typeof t?a(t)?o(t[0],t[1]):r(t):u(t)}},function(t,e,n){var r=n(229),o=n(9);t.exports=function t(e,n,i,a,u){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,u))}},function(t,e,n){var r=n(77),o=n(230),i=n(81),a=1,u=2;t.exports=function(t,e,n,s,c,f){var h=n&a,l=t.length,p=e.length;if(l!=p&&!(h&&p>l))return!1;var d=f.get(t);if(d&&f.get(e))return d==e;var v=-1,y=!0,g=n&u?new r:void 0;for(f.set(t,e),f.set(e,t);++v<l;){var _=t[v],I=e[v];if(s)var w=h?s(I,_,v,e,t,f):s(_,I,v,t,e,f);if(void 0!==w){if(w)continue;y=!1;break}if(g){if(!o(e,function(t,e){if(!i(g,e)&&(_===t||c(_,t,n,s,f)))return g.push(e)})){y=!1;break}}else if(_!==I&&!c(_,I,n,s,f)){y=!1;break}}return f.delete(t),f.delete(e),y}},function(t,e,n){var r=n(21);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){"use strict";var r=n(22).compose;e.__esModule=!0,e.composeWithDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},e.devToolsEnhancer="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(t){return t}}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){var r=n(131),o=n(163),i=n(168),a=o(function(t,e){return i(t)?r(t,e):[]});t.exports=a},function(t,e,n){var r=n(47),o=n(171),i=n(208),a=n(40),u=n(25),s=n(217),c=n(219),f=n(96),h=c(function(t,e){var n={};if(null==t)return n;var c=!1;e=r(e,function(e){return e=a(e,t),c||(c=e.length>1),e}),u(t,f(t),n),c&&(n=o(n,7,s));for(var h=e.length;h--;)i(n,e[h]);return n});t.exports=h},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){(function(t,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var u,s=2147483647,c=36,f=1,h=26,l=38,p=700,d=72,v=128,y="-",g=/^xn--/,_=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=c-f,m=Math.floor,O=String.fromCharCode;function S(t){throw new RangeError(w[t])}function b(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function A(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+b((t=t.replace(I,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function R(t){return b(t,function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=O(t)}).join("")}function N(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,n){var r=0;for(t=n?m(t/p):t>>1,t+=m(t/e);t>E*h>>1;r+=c)t=m(t/E);return m(r+(E+1)*t/(t+l))}function M(t){var e,n,r,o,i,a,u,l,p,g,_,I=[],w=t.length,E=0,O=v,b=d;for((n=t.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&S("not-basic"),I.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=E,a=1,u=c;o>=w&&S("invalid-input"),((l=(_=t.charCodeAt(o++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:c)>=c||l>m((s-E)/a))&&S("overflow"),E+=l*a,!(l<(p=u<=b?f:u>=b+h?h:u-b));u+=c)a>m(s/(g=c-p))&&S("overflow"),a*=g;b=C(E-i,e=I.length+1,0==i),m(E/e)>s-O&&S("overflow"),O+=m(E/e),E%=e,I.splice(E++,0,O)}return R(I)}function P(t){var e,n,r,o,i,a,u,l,p,g,_,I,w,E,b,A=[];for(I=(t=T(t)).length,e=v,n=0,i=d,a=0;a<I;++a)(_=t[a])<128&&A.push(O(_));for(r=o=A.length,o&&A.push(y);r<I;){for(u=s,a=0;a<I;++a)(_=t[a])>=e&&_<u&&(u=_);for(u-e>m((s-n)/(w=r+1))&&S("overflow"),n+=(u-e)*w,e=u,a=0;a<I;++a)if((_=t[a])<e&&++n>s&&S("overflow"),_==e){for(l=n,p=c;!(l<(g=p<=i?f:p>=i+h?h:p-i));p+=c)b=l-g,E=c-g,A.push(O(N(g+b%E,0))),l=m(b/E);A.push(O(N(l,0))),i=C(n,w,r==o),n=0,++r}++n,++e}return A.join("")}u={version:"1.4.1",ucs2:{decode:T,encode:R},decode:M,encode:P,toASCII:function(t){return A(t,function(t){return _.test(t)?"xn--"+P(t):t})},toUnicode:function(t){return A(t,function(t){return g.test(t)?M(t.slice(4).toLowerCase()):t})}},void 0===(o=function(){return u}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(30)(t),n(5))},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(112),e.encode=e.stringify=n(113)},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var f=0;f<c;++f){var h,l,p,d,v=t[f].replace(u,"%20"),y=v.indexOf(n);y>=0?(h=v.substr(0,y),l=v.substr(y+1)):(h=v,l=""),p=decodeURIComponent(h),d=decodeURIComponent(l),r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(a(t),function(a){var u=encodeURIComponent(r(a))+n;return o(t[a])?i(t[a],function(t){return u+encodeURIComponent(r(t))}).join(e):u+encodeURIComponent(r(t[a]))}).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){(function(e,r,o){var i=n(67),a=n(15),u=n(68),s=n(69),c=n(124),f=u.IncomingMessage,h=u.readyStates;var l=t.exports=function(t){var n,r=this;s.Writable.call(r),r._opts=t,r._body=[],r._headers={},t.auth&&r.setHeader("Authorization","Basic "+new e(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(e){r.setHeader(e,t.headers[e])});var o=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!i.abortController)o=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!i.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=function(t,e){return i.fetch&&e?"fetch":i.mozchunkedarraybuffer?"moz-chunked-arraybuffer":i.msstream?"ms-stream":i.arraybuffer&&t?"arraybuffer":i.vbArray&&t?"text:vbarray":"text"}(n,o),r._fetchTimer=null,r.on("finish",function(){r._onFinish()})};a(l,s.Writable),l.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===p.indexOf(n)&&(this._headers[n]={name:t,value:e})},l.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},l.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},l.prototype._onFinish=function(){var t=this;if(!t._destroyed){var n=t._opts,a=t._headers,u=null;"GET"!==n.method&&"HEAD"!==n.method&&(u=i.arraybuffer?c(e.concat(t._body)):i.blobConstructor?new r.Blob(t._body.map(function(t){return c(t)}),{type:(a["content-type"]||{}).value||""}):e.concat(t._body).toString());var s=[];if(Object.keys(a).forEach(function(t){var e=a[t].name,n=a[t].value;Array.isArray(n)?n.forEach(function(t){s.push([e,t])}):s.push([e,n])}),"fetch"===t._mode){var f=null;if(i.abortController){var l=new AbortController;f=l.signal,t._fetchAbortController=l,"requestTimeout"in n&&0!==n.requestTimeout&&(t._fetchTimer=r.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},n.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:s,body:u||void 0,mode:"cors",credentials:n.withCredentials?"include":"same-origin",signal:f}).then(function(e){t._fetchResponse=e,t._connect()},function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var p=t._xhr=new r.XMLHttpRequest;try{p.open(t._opts.method,t._opts.url,!0)}catch(e){return void o.nextTick(function(){t.emit("error",e)})}"responseType"in p&&(p.responseType=t._mode.split(":")[0]),"withCredentials"in p&&(p.withCredentials=!!n.withCredentials),"text"===t._mode&&"overrideMimeType"in p&&p.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in n&&(p.timeout=n.requestTimeout,p.ontimeout=function(){t.emit("requestTimeout")}),s.forEach(function(t){p.setRequestHeader(t[0],t[1])}),t._response=null,p.onreadystatechange=function(){switch(p.readyState){case h.LOADING:case h.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(p.onprogress=function(){t._onXHRProgress()}),p.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{p.send(u)}catch(e){return void o.nextTick(function(){t.emit("error",e)})}}}},l.prototype._onXHRProgress=function(){(function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return!1}})(this._xhr)&&!this._destroyed&&(this._response||this._connect(),this._response._onXHRProgress())},l.prototype._connect=function(){var t=this;t._destroyed||(t._response=new f(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},l.prototype._write=function(t,e,n){this._body.push(t),n()},l.prototype.abort=l.prototype.destroy=function(){this._destroyed=!0,r.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},l.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),s.Writable.prototype.end.call(this,t,e,n)},l.prototype.flushHeaders=function(){},l.prototype.setTimeout=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,n(23).Buffer,n(5),n(17))},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=c(t),r=n[0],a=n[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),s=0,f=a>0?r-4:r,h=0;h<f;h+=4)e=o[t.charCodeAt(h)]<<18|o[t.charCodeAt(h+1)]<<12|o[t.charCodeAt(h+2)]<<6|o[t.charCodeAt(h+3)],u[s++]=e>>16&255,u[s++]=e>>8&255,u[s++]=255&e;2===a&&(e=o[t.charCodeAt(h)]<<2|o[t.charCodeAt(h+1)]>>4,u[s++]=255&e);1===a&&(e=o[t.charCodeAt(h)]<<10|o[t.charCodeAt(h+1)]<<4|o[t.charCodeAt(h+2)]>>2,u[s++]=e>>8&255,u[s++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,u=n-o;a<u;a+=16383)i.push(f(t,a,a+16383>u?u:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function f(t,e,n){for(var o,i,a=[],u=e;u<n;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,f=-7,h=n?o-1:0,l=n?-1:1,p=t[e+h];for(h+=l,i=p&(1<<-f)-1,p>>=-f,f+=u;f>0;i=256*i+t[e+h],h+=l,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=r;f>0;a=256*a+t[e+h],h+=l,f-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=c}return(p?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,u,s,c=8*i-o-1,f=(1<<c)-1,h=f>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+h>=1?l/s:l*Math.pow(2,1-h))*s>=2&&(a++,s/=2),a+h>=f?(u=0,a=f):a+h>=1?(u=(e*s-1)*Math.pow(2,o),a+=h):(u=e*Math.pow(2,h-1)*Math.pow(2,o),a=0));o>=8;t[n+p]=255&u,p+=d,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){},function(t,e,n){"use strict";var r=n(32).Buffer,o=n(119);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,o,i=r.allocUnsafe(t>>>0),a=this.head,u=0;a;)e=a.data,n=i,o=u,e.copy(n,o),u+=a.data.length,a=a.next;return i},t}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var t=o.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(121),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(5))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,a,u,s=1,c={},f=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){d(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(o=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",u=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),r=function(e){t.postMessage(a+e,"*")}),l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[s]=o,r(s),s++},l.clearImmediate=p}function p(t){delete c[t]}function d(t){if(f)setTimeout(d,0,t);else{var e=c[t];if(e){f=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{p(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(5),n(17))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(5))},function(t,e,n){"use strict";t.exports=i;var r=n(76),o=n(24);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}o.inherits=n(15),o.inherits(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var r=n(23).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,o=0;o<n;o++)e[o]=t[o];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var o in r)n.call(r,o)&&(t[o]=r[o])}return t};var n=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,e,n){var r=n(65),o=n(29),i=t.exports;for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);function u(t){if("string"==typeof t&&(t=o.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}i.request=function(t,e){return t=u(t),r.request.call(this,t,e)},i.get=function(t,e){return t=u(t),r.get.call(this,t,e)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=n(77),o=n(157),i=n(162),a=n(47),u=n(37),s=n(81),c=200;t.exports=function(t,e,n,f){var h=-1,l=o,p=!0,d=t.length,v=[],y=e.length;if(!d)return v;n&&(e=a(e,u(n))),f?(l=i,p=!1):e.length>=c&&(l=s,p=!1,e=new r(e));t:for(;++h<d;){var g=t[h],_=null==n?g:n(g);if(g=f||0!==g?g:0,p&&_==_){for(var I=y;I--;)if(e[I]===_)continue t;v.push(g)}else l(e,_,f)||v.push(g)}return v}},function(t,e,n){var r=n(133),o=n(34),i=n(46);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},function(t,e,n){var r=n(134),o=n(141),i=n(142),a=n(143),u=n(144);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,n){var r=n(33);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e,n){var r=n(78),o=n(138),i=n(21),a=n(80),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,h=c.hasOwnProperty,l=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(r(t)?l:u).test(a(t))}},function(t,e,n){var r=n(20),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[u]=n:delete t[u]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r,o=n(139),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(8)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(33),o="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===o?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(33),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)}},function(t,e,n){var r=n(33),o="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?o:e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(35),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(35);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(35);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(35);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},function(t,e,n){var r=n(36);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(36);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(36);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(36);t.exports=function(t,e){var n=r(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(158);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e,n){var r=n(159),o=n(160),i=n(161);t.exports=function(t,e,n){return e==e?i(t,e,n):r(t,o,n)}},function(t,e){t.exports=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},function(t,e,n){var r=n(48),o=n(82),i=n(83);t.exports=function(t,e){return i(o(t,e,r),t+"")}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(166),o=n(84),i=n(48),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,o=Date.now;t.exports=function(t){var e=0,i=0;return function(){var a=o(),u=r-(a-i);if(i=a,u>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){var r=n(38),o=n(9);t.exports=function(t){return o(t)&&r(t)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},function(t,e,n){var r=n(50),o=n(177),i=n(85),a=n(178),u=n(185),s=n(188),c=n(189),f=n(190),h=n(191),l=n(94),p=n(96),d=n(39),v=n(196),y=n(197),g=n(202),_=n(7),I=n(53),w=n(204),E=n(21),m=n(206),O=n(26),S=1,b=2,A=4,T="[object Arguments]",R="[object Function]",N="[object GeneratorFunction]",C="[object Object]",M={};M[T]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object DataView]"]=M["[object Boolean]"]=M["[object Date]"]=M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Map]"]=M["[object Number]"]=M[C]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object Symbol]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Error]"]=M[R]=M["[object WeakMap]"]=!1,t.exports=function t(e,n,P,x,L,j){var D,U=n&S,F=n&b,k=n&A;if(P&&(D=L?P(e,x,L,j):P(e)),void 0!==D)return D;if(!E(e))return e;var W=_(e);if(W){if(D=v(e),!U)return c(e,D)}else{var V=d(e),G=V==R||V==N;if(I(e))return s(e,U);if(V==C||V==T||G&&!L){if(D=F||G?{}:g(e),!U)return F?h(e,u(D,e)):f(e,a(D,e))}else{if(!M[V])return L?e:{};D=y(e,V,U)}}j||(j=new r);var B=j.get(e);if(B)return B;if(j.set(e,D),m(e))return e.forEach(function(r){D.add(t(r,n,P,r,e,j))}),D;if(w(e))return e.forEach(function(r,o){D.set(o,t(r,n,P,o,e,j))}),D;var H=k?F?p:l:F?keysIn:O,z=W?void 0:H(e);return o(z||e,function(r,o){z&&(r=e[o=r]),i(D,o,t(r,n,P,o,e,j))}),D}},function(t,e,n){var r=n(34);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(34),o=n(46),i=n(44),a=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var u=n.__data__;if(!o||u.length<a-1)return u.push([t,e]),this.size=++n.size,this;n=this.__data__=new i(u)}return n.set(t,e),this.size=n.size,this}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e,n){var r=n(25),o=n(26);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(19),o=n(9),i="[object Arguments]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(19),o=n(49),i=n(9),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e,n){var r=n(55),o=n(184),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(89)(Object.keys,Object);t.exports=r},function(t,e,n){var r=n(25),o=n(90);t.exports=function(t,e){return t&&r(e,o(e),t)}},function(t,e,n){var r=n(21),o=n(55),i=n(187),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=o(t),n=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&n.push(u);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(8),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(30)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(25),o=n(56);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(25),o=n(93);t.exports=function(t,e){return r(t,o(t),e)}},function(t,e,n){var r=n(16)(n(8),"DataView");t.exports=r},function(t,e,n){var r=n(16)(n(8),"Promise");t.exports=r},function(t,e,n){var r=n(16)(n(8),"Set");t.exports=r},function(t,e,n){var r=n(16)(n(8),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(59),o=n(198),i=n(199),a=n(200),u=n(201),s="[object Boolean]",c="[object Date]",f="[object Map]",h="[object Number]",l="[object RegExp]",p="[object Set]",d="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",_="[object Float32Array]",I="[object Float64Array]",w="[object Int8Array]",E="[object Int16Array]",m="[object Int32Array]",O="[object Uint8Array]",S="[object Uint8ClampedArray]",b="[object Uint16Array]",A="[object Uint32Array]";t.exports=function(t,e,n){var T=t.constructor;switch(e){case y:return r(t);case s:case c:return new T(+t);case g:return o(t,n);case _:case I:case w:case E:case m:case O:case S:case b:case A:return u(t,n);case f:return new T;case h:case d:return new T(t);case l:return i(t);case p:return new T;case v:return a(t)}}},function(t,e,n){var r=n(59);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(20),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,n){var r=n(59);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(203),o=n(58),i=n(55);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:r(o(t))}},function(t,e,n){var r=n(21),o=Object.create,i=function(){function t(){}return function(e){if(!r(e))return{};if(o)return o(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=i},function(t,e,n){var r=n(205),o=n(37),i=n(54),a=i&&i.isMap,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(39),o=n(9),i="[object Map]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(207),o=n(37),i=n(54),a=i&&i.isSet,u=a?o(a):r;t.exports=u},function(t,e,n){var r=n(39),o=n(9),i="[object Set]";t.exports=function(t){return o(t)&&r(t)==i}},function(t,e,n){var r=n(40),o=n(214),i=n(215),a=n(27);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[a(o(e))]}},function(t,e,n){var r=n(210),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,n,r,o){e.push(r?o.replace(i,"$1"):n||t)}),e});t.exports=a},function(t,e,n){var r=n(211),o=500;t.exports=function(t){var e=r(t,function(t){return n.size===o&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(44),o="Expected a function";function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},function(t,e,n){var r=n(213);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(20),o=n(47),i=n(7),a=n(61),u=1/0,s=r?r.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var n=e+"";return"0"==n&&1/e==-u?"-0":n}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){var r=n(62),o=n(216);t.exports=function(t,e){return e.length<2?t:r(t,o(e,0,-1))}},function(t,e){t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},function(t,e,n){var r=n(218);t.exports=function(t){return r(t)?void 0:t}},function(t,e,n){var r=n(19),o=n(58),i=n(9),a="[object Object]",u=Function.prototype,s=Object.prototype,c=u.toString,f=s.hasOwnProperty,h=c.call(Object);t.exports=function(t){if(!i(t)||r(t)!=a)return!1;var e=o(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==h}},function(t,e,n){var r=n(3),o=n(82),i=n(83);t.exports=function(t){return i(o(t,void 0,r),t+"")}},function(t,e,n){var r=n(57),o=n(221);t.exports=function t(e,n,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];n>0&&i(f)?n>1?t(f,n-1,i,a,u):r(u,f):a||(u[u.length]=f)}return u}},function(t,e,n){var r=n(20),o=n(52),i=n(7),a=r?r.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e,n){var r=n(98);t.exports=function(t,e){var n=[];return r(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}},function(t,e,n){var r=n(224),o=n(26);t.exports=function(t,e){return t&&r(t,e,o)}},function(t,e,n){var r=n(225)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===n(i[s],s,i))break}return e}}},function(t,e,n){var r=n(38);t.exports=function(t,e){return function(n,o){if(null==n)return n;if(!r(n))return t(n,o);for(var i=n.length,a=e?i:-1,u=Object(n);(e?a--:++a<i)&&!1!==o(u[a],a,u););return n}}},function(t,e,n){var r=n(228),o=n(235),i=n(103);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(50),o=n(100),i=1,a=2;t.exports=function(t,e,n,u){var s=n.length,c=s,f=!u;if(null==t)return!c;for(t=Object(t);s--;){var h=n[s];if(f&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<c;){var l=(h=n[s])[0],p=t[l],d=h[1];if(f&&h[2]){if(void 0===p&&!(l in t))return!1}else{var v=new r;if(u)var y=u(p,d,l,t,e,v);if(!(void 0===y?o(d,p,i|a,u,v):y))return!1}}return!0}},function(t,e,n){var r=n(50),o=n(101),i=n(231),a=n(234),u=n(39),s=n(7),c=n(53),f=n(88),h=1,l="[object Arguments]",p="[object Array]",d="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,y,g,_){var I=s(t),w=s(e),E=I?p:u(t),m=w?p:u(e),O=(E=E==l?d:E)==d,S=(m=m==l?d:m)==d,b=E==m;if(b&&c(t)){if(!c(e))return!1;I=!0,O=!1}if(b&&!O)return _||(_=new r),I||f(t)?o(t,e,n,y,g,_):i(t,e,E,n,y,g,_);if(!(n&h)){var A=O&&v.call(t,"__wrapped__"),T=S&&v.call(e,"__wrapped__");if(A||T){var R=A?t.value():t,N=T?e.value():e;return _||(_=new r),g(R,N,n,y,_)}}return!!b&&(_||(_=new r),a(t,e,n,y,g,_))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(20),o=n(97),i=n(45),a=n(101),u=n(232),s=n(233),c=1,f=2,h="[object Boolean]",l="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",g="[object Set]",_="[object String]",I="[object Symbol]",w="[object ArrayBuffer]",E="[object DataView]",m=r?r.prototype:void 0,O=m?m.valueOf:void 0;t.exports=function(t,e,n,r,m,S,b){switch(n){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case w:return!(t.byteLength!=e.byteLength||!S(new o(t),new o(e)));case h:case l:case v:return i(+t,+e);case p:return t.name==e.name&&t.message==e.message;case y:case _:return t==e+"";case d:var A=u;case g:var T=r&c;if(A||(A=s),t.size!=e.size&&!T)return!1;var R=b.get(t);if(R)return R==e;r|=f,b.set(t,e);var N=a(A(t),A(e),r,m,S,b);return b.delete(t),N;case I:if(O)return O.call(t)==O.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(94),o=1,i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,u,s){var c=n&o,f=r(t),h=f.length;if(h!=r(e).length&&!c)return!1;for(var l=h;l--;){var p=f[l];if(!(c?p in e:i.call(e,p)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var v=!0;s.set(t,e),s.set(e,t);for(var y=c;++l<h;){var g=t[p=f[l]],_=e[p];if(a)var I=c?a(_,g,p,e,t,s):a(g,_,p,t,e,s);if(!(void 0===I?g===_||u(g,_,n,a,s):I)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=t.constructor,E=e.constructor;w!=E&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(v=!1)}return s.delete(t),s.delete(e),v}},function(t,e,n){var r=n(102),o=n(26);t.exports=function(t){for(var e=o(t),n=e.length;n--;){var i=e[n],a=t[i];e[n]=[i,a,r(a)]}return e}},function(t,e,n){var r=n(100),o=n(237),i=n(238),a=n(60),u=n(102),s=n(103),c=n(27),f=1,h=2;t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(n){var a=o(n,t);return void 0===a&&a===e?i(n,t):r(e,a,f|h)}}},function(t,e,n){var r=n(62);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},function(t,e,n){var r=n(239),o=n(240);t.exports=function(t,e){return null!=t&&o(t,e,r)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(40),o=n(52),i=n(7),a=n(87),u=n(49),s=n(27);t.exports=function(t,e,n){for(var c=-1,f=(e=r(e,t)).length,h=!1;++c<f;){var l=s(e[c]);if(!(h=null!=t&&n(t,l)))break;t=t[l]}return h||++c!=f?h:!!(f=null==t?0:t.length)&&u(f)&&a(l,f)&&(i(t)||o(t))}},function(t,e,n){var r=n(242),o=n(243),i=n(60),a=n(27);t.exports=function(t){return i(t)?r(a(t)):o(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(62);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(245),o=n(246),i=n(99),a=n(7);t.exports=function(t,e){return function(n,u){var s=a(n)?r:o,c=e?e():{};return s(n,t,i(u,2),c)}}},function(t,e){t.exports=function(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];e(r,a,n(a),t)}return r}},function(t,e,n){var r=n(98);t.exports=function(t,e,n,o){return r(t,function(t,r,i){e(o,t,n(t),i)}),o}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}},function(t,e,n){"use strict";n.r(e);var r={};function o(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}n.r(r),n.d(r,"addCompanionWindow",function(){return vi}),n.d(r,"addOrUpdateCompanionWindow",function(){return yi}),n.d(r,"updateCompanionWindow",function(){return gi}),n.d(r,"removeCompanionWindow",function(){return _i}),n.d(r,"importConfig",function(){return Ii}),n.d(r,"setConfig",function(){return wi}),n.d(r,"updateConfig",function(){return Ei}),n.d(r,"importMiradorState",function(){return mi}),n.d(r,"addError",function(){return Oi}),n.d(r,"removeError",function(){return Si}),n.d(r,"focusWindow",function(){return Ti}),n.d(r,"addWindow",function(){return Ri}),n.d(r,"maximizeWindow",function(){return Ni}),n.d(r,"minimizeWindow",function(){return Ci}),n.d(r,"updateWindow",function(){return Mi}),n.d(r,"setCompanionAreaOpen",function(){return Pi}),n.d(r,"removeWindow",function(){return xi}),n.d(r,"toggleWindowSideBar",function(){return Li}),n.d(r,"setWindowThumbnailPosition",function(){return ji}),n.d(r,"setWindowViewType",function(){return Di}),n.d(r,"requestManifest",function(){return ki}),n.d(r,"receiveManifest",function(){return Wi}),n.d(r,"receiveManifestFailure",function(){return Vi}),n.d(r,"fetchManifest",function(){return Gi}),n.d(r,"removeManifest",function(){return Bi}),n.d(r,"requestInfoResponse",function(){return Hi}),n.d(r,"receiveInfoResponse",function(){return zi}),n.d(r,"receiveInfoResponseFailure",function(){return qi}),n.d(r,"fetchInfoResponse",function(){return Ki}),n.d(r,"removeInfoResponse",function(){return Yi}),n.d(r,"setCanvas",function(){return Qi}),n.d(r,"updateViewport",function(){return Xi}),n.d(r,"setWorkspaceFullscreen",function(){return $i}),n.d(r,"toggleZoomControls",function(){return Ji}),n.d(r,"updateWorkspaceMosaicLayout",function(){return Zi}),n.d(r,"setWorkspaceAddVisibility",function(){return ta}),n.d(r,"setWorkspaceViewportPosition",function(){return ea}),n.d(r,"setWorkspaceViewportDimensions",function(){return na}),n.d(r,"toggleWorkspaceExposeMode",function(){return ra}),n.d(r,"toggleDraggingEnabled",function(){return oa}),n.d(r,"requestAnnotation",function(){return ia}),n.d(r,"receiveAnnotation",function(){return aa}),n.d(r,"receiveAnnotationFailure",function(){return ua}),n.d(r,"fetchAnnotation",function(){return sa}),n.d(r,"selectAnnotation",function(){return ca}),n.d(r,"deselectAnnotation",function(){return fa}),n.d(r,"toggleAnnotationDisplay",function(){return ha}),n.d(r,"highlightAnnotation",function(){return la}),n.d(r,"addAuthenticationRequest",function(){return pa}),n.d(r,"resolveAuthenticationRequest",function(){return da}),n.d(r,"requestAccessToken",function(){return va}),n.d(r,"receiveAccessToken",function(){return ya}),n.d(r,"receiveAccessTokenFailure",function(){return ga}),n.d(r,"fetchAccessTokenRequest",function(){return _a}),n.d(r,"resolveAccessTokenRequest",function(){return Ia}),n.d(r,"updateElasticWindowLayout",function(){return wa}),n.d(r,"requestSearch",function(){return Ea}),n.d(r,"receiveSearch",function(){return ma}),n.d(r,"receiveSearchFailure",function(){return Oa}),n.d(r,"removeSearch",function(){return Sa}),n.d(r,"fetchSearch",function(){return ba}),n.d(r,"selectContentSearchAnnotation",function(){return Aa});var i=o();i.withExtraArgument=o;var a=i,u=n(22),s=n(104),c=n(0),f=n.n(c),h=n(1),l=n.n(h),p=n(10),d=n.n(p),v=n(2),y=n.n(v),g={ADD_COMPANION_WINDOW:"ADD_COMPANION_WINDOW",UPDATE_COMPANION_WINDOW:"UPDATE_COMPANION_WINDOW",REMOVE_COMPANION_WINDOW:"REMOVE_COMPANION_WINDOW",UPDATE_WINDOW:"UPDATE_WINDOW",HIGHLIGHT_ANNOTATION:"HIGHLIGHT_ANNOTATION",REQUEST_ANNOTATION:"REQUEST_ANNOTATION",RECEIVE_ANNOTATION:"RECEIVE_ANNOTATION",RECEIVE_ANNOTATION_FAILURE:"RECEIVE_ANNOTATION_FAILURE",DESELECT_ANNOTATION:"DESELECT_ANNOTATION",SELECT_ANNOTATION:"SELECT_ANNOTATION",TOGGLE_ANNOTATION_DISPLAY:"TOGGLE_ANNOTATION_DISPLAY",FOCUS_WINDOW:"FOCUS_WINDOW",SET_WORKSPACE_FULLSCREEN:"SET_WORKSPACE_FULLSCREEN",SET_WORKSPACE_VIEWPORT_POSITION:"SET_WORKSPACE_VIEWPORT_POSITION",TOGGLE_WORKSPACE_EXPOSE_MODE:"TOGGLE_WORKSPACE_EXPOSE_MODE",ADD_MANIFEST:"ADD_MANIFEST",ADD_WINDOW:"ADD_WINDOW",ADD_ERROR:"ADD_ERROR",IMPORT_CONFIG:"IMPORT_CONFIG",IMPORT_MIRADOR_STATE:"IMPORT_MIRADOR_STATE",SET_CANVAS:"SET_CANVAS",MAXIMIZE_WINDOW:"MAXIMIZE_WINDOW",MINIMIZE_WINDOW:"MINIMIZE_WINDOW",UPDATE_WINDOW_POSITION:"UPDATE_WINDOW_POSITION",SET_WINDOW_SIZE:"SET_WINDOW_SIZE",REMOVE_WINDOW:"REMOVE_WINDOW",PICK_WINDOWING_SYSTEM:"PICK_WINDOWING_SYSTEM",REQUEST_MANIFEST:"REQUEST_MANIFEST",RECEIVE_MANIFEST:"RECEIVE_MANIFEST",RECEIVE_MANIFEST_FAILURE:"RECEIVE_MANIFEST_FAILURE",REMOVE_ERROR:"REMOVE_ERROR",SET_CONFIG:"SET_CONFIG",SET_WINDOW_THUMBNAIL_POSITION:"SET_WINDOW_THUMBNAIL_POSITION",SET_WINDOW_VIEW_TYPE:"SET_WINDOW_VIEW_TYPE",SET_WORKSPACE_ADD_VISIBILITY:"SET_WORKSPACE_ADD_VISIBILITY",TOGGLE_WINDOW_SIDE_BAR:"TOGGLE_WINDOW_SIDE_BAR",TOGGLE_DRAGGING:"TOGGLE_DRAGGING",SET_WINDOW_SIDE_BAR_PANEL:"SET_WINDOW_SIDE_BAR_PANEL",TOGGLE_ZOOM_CONTROLS:"TOGGLE_ZOOM_CONTROLS",UPDATE_CONFIG:"UPDATE_CONFIG",REMOVE_MANIFEST:"REMOVE_MANIFEST",REQUEST_INFO_RESPONSE:"REQUEST_INFO_RESPONSE",RECEIVE_INFO_RESPONSE:"RECEIVE_INFO_RESPONSE",RECEIVE_INFO_RESPONSE_FAILURE:"RECEIVE_INFO_RESPONSE_FAILURE",REMOVE_INFO_RESPONSE:"REMOVE_INFO_RESPONSE",UPDATE_WORKSPACE_MOSAIC_LAYOUT:"UPDATE_WORKSPACE_MOSAIC_LAYOUT",UPDATE_VIEWPORT:"UPDATE_VIEWPORT",UPDATE_ELASTIC_WINDOW_LAYOUT:"UPDATE_ELASTIC_WINDOW_LAYOUT",ADD_AUTHENTICATION_REQUEST:"ADD_AUTHENTICATION_REQUEST",RESOLVE_AUTHENTICATION_REQUEST:"RESOLVE_AUTHENTICATION_REQUEST",REQUEST_ACCESS_TOKEN:"REQUEST_ACCESS_TOKEN",RECEIVE_ACCESS_TOKEN:"RECEIVE_ACCESS_TOKEN",RECEIVE_ACCESS_TOKEN_FAILURE:"RECEIVE_ACCESS_TOKEN_FAILURE",REQUEST_SEARCH:"REQUEST_SEARCH",RECEIVE_SEARCH:"RECEIVE_SEARCH",RECEIVE_SEARCH_FAILURE:"RECEIVE_SEARCH_FAILURE",REMOVE_SEARCH:"REMOVE_SEARCH",SELECT_CONTENT_SEARCH_ANNOTATION:"SELECT_CONTENT_SEARCH_ANNOTATION"};function _(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case g.RECEIVE_INFO_RESPONSE:return r.ok&&d()(r.infoId,{stripAuthentication:!1})===d()(r.infoJson["@id"],{stripAuthentication:!1})?n:(t=v.Utils.getService(f()({},r.infoJson,{options:{}}),"http://iiif.io/api/auth/1/external"))?!(e=v.Utils.getService(t,"http://iiif.io/api/auth/1/token"))||n[e.id]?n:f()({},n,l()({},e.id,{authId:t.id,id:e.id,infoIds:[].concat(n[e.id]&&n[e.id].infoIds||[],r.infoId),isFetching:!0})):n;case g.REQUEST_ACCESS_TOKEN:return f()({},n,l()({},r.serviceId,{authId:r.authId,id:r.serviceId,infoIds:r.infoIds,isFetching:!0}));case g.RECEIVE_ACCESS_TOKEN:return f()({},n,l()({},r.serviceId,f()({},n[r.serviceId],{infoIds:[],isFetching:!1,json:r.json})));case g.RECEIVE_ACCESS_TOKEN_FAILURE:return f()({},n,l()({},r.serviceId,f()({},n[r.serviceId],{error:r.error,isFetching:!1})));default:return n}}var I=5,w=1<<I,E=w-1,m={};function O(t){t&&(t.value=!0)}function S(){}function b(t){return void 0===t.size&&(t.size=t.__iterate(T)),t.size}function A(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?b(t)+e:e}function T(){return!0}function R(t,e,n){return(0===t&&!P(t)||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function N(t,e){return M(t,e,0)}function C(t,e){return M(t,e,e)}function M(t,e,n){return void 0===t?n:P(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function P(t){return t<0||0===t&&1/t==-1/0}var x="@@__IMMUTABLE_ITERABLE__@@";function L(t){return Boolean(t&&t[x])}var j="@@__IMMUTABLE_KEYED__@@";function D(t){return Boolean(t&&t[j])}var U="@@__IMMUTABLE_INDEXED__@@";function F(t){return Boolean(t&&t[U])}function k(t){return D(t)||F(t)}var W=function(t){return L(t)?t:lt(t)},V=function(t){function e(t){return D(t)?t:pt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(W),G=function(t){function e(t){return F(t)?t:dt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(W),B=function(t){function e(t){return L(t)&&!k(t)?t:vt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(W);W.Keyed=V,W.Indexed=G,W.Set=B;var H="@@__IMMUTABLE_SEQ__@@";function z(t){return Boolean(t&&t[H])}var q="@@__IMMUTABLE_RECORD__@@";function K(t){return Boolean(t&&t[q])}function Y(t){return L(t)||K(t)}var Q="@@__IMMUTABLE_ORDERED__@@";function X(t){return Boolean(t&&t[Q])}var $=0,J=1,Z=2,tt="function"==typeof Symbol&&Symbol.iterator,et="@@iterator",nt=tt||et,rt=function(t){this.next=t};function ot(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function it(){return{value:void 0,done:!0}}function at(t){return!!ct(t)}function ut(t){return t&&"function"==typeof t.next}function st(t){var e=ct(t);return e&&e.call(t)}function ct(t){var e=t&&(tt&&t[tt]||t[et]);if("function"==typeof e)return e}rt.prototype.toString=function(){return"[Iterator]"},rt.KEYS=$,rt.VALUES=J,rt.ENTRIES=Z,rt.prototype.inspect=rt.prototype.toSource=function(){return this.toString()},rt.prototype[nt]=function(){return this};var ft=Object.prototype.hasOwnProperty;function ht(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var lt=function(t){function e(t){return null==t?wt():Y(t)?t.toSeq():function(t){var e=Ot(t);if(e)return e;if("object"==typeof t)return new gt(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this._cache;if(n){for(var r=n.length,o=0;o!==r;){var i=n[e?r-++o:o++];if(!1===t(i[1],i[0],this))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,o=0;return new rt(function(){if(o===r)return{value:void 0,done:!0};var i=n[e?r-++o:o++];return ot(t,i[0],i[1])})}return this.__iteratorUncached(t,e)},e}(W),pt=function(t){function e(t){return null==t?wt().toKeyedSeq():L(t)?D(t)?t.toSeq():t.fromEntrySeq():K(t)?t.toSeq():Et(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(lt),dt=function(t){function e(t){return null==t?wt():L(t)?D(t)?t.entrySeq():t.toIndexedSeq():K(t)?t.toSeq().entrySeq():mt(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(lt),vt=function(t){function e(t){return(L(t)&&!k(t)?t:dt(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(lt);lt.isSeq=z,lt.Keyed=pt,lt.Set=vt,lt.Indexed=dt,lt.prototype[H]=!0;var yt=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[A(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length,o=0;o!==r;){var i=e?r-++o:o++;if(!1===t(n[i],i,this))break}return o},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,o=0;return new rt(function(){if(o===r)return{value:void 0,done:!0};var i=e?r-++o:o++;return ot(t,i,n[i])})},e}(dt),gt=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return ft.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length,i=0;i!==o;){var a=r[e?o-++i:i++];if(!1===t(n[a],a,this))break}return i},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length,i=0;return new rt(function(){if(i===o)return{value:void 0,done:!0};var a=r[e?o-++i:i++];return ot(t,a,n[a])})},e}(pt);gt.prototype[Q]=!0;var _t,It=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=st(this._collection),r=0;if(ut(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=st(this._collection);if(!ut(n))return new rt(it);var r=0;return new rt(function(){var e=n.next();return e.done?e:ot(t,r++,e.value)})},e}(dt);function wt(){return _t||(_t=new yt([]))}function Et(t){var e=Array.isArray(t)?new yt(t):at(t)?new It(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new gt(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function mt(t){var e=Ot(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function Ot(t){return ht(t)?new yt(t):at(t)?new It(t):void 0}var St="@@__IMMUTABLE_MAP__@@";function bt(t){return Boolean(t&&t[St])}function At(t){return bt(t)&&X(t)}function Tt(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function Rt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(Tt(t)&&Tt(e)&&t.equals(e))}var Nt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function Ct(t){return t>>>1&1073741824|3221225471&t}var Mt=Object.prototype.valueOf;function Pt(t){switch(typeof t){case"boolean":return t?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;e!==t&&(e^=4294967295*t);for(;t>4294967295;)e^=t/=4294967295;return Ct(e)}(t);case"string":return t.length>Wt?function(t){var e=Bt[t];void 0===e&&(e=xt(t),Gt===Vt&&(Gt=0,Bt={}),Gt++,Bt[t]=e);return e}(t):xt(t);case"object":case"function":return null===t?1108378658:"function"==typeof t.hashCode?Ct(t.hashCode(t)):(t.valueOf!==Mt&&"function"==typeof t.valueOf&&(t=t.valueOf(t)),function(t){var e;if(Ut&&void 0!==(e=Dt.get(t)))return e;if(void 0!==(e=t[kt]))return e;if(!jt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[kt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}e=++Ft,1073741824&Ft&&(Ft=0);if(Ut)Dt.set(t,e);else{if(void 0!==Lt&&!1===Lt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(jt)Object.defineProperty(t,kt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[kt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[kt]=e}}return e}(t));case"undefined":return 1108378659;default:if("function"==typeof t.toString)return xt(t.toString());throw new Error("Value type "+typeof t+" cannot be hashed.")}}function xt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return Ct(e)}var Lt=Object.isExtensible,jt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();var Dt,Ut="function"==typeof WeakMap;Ut&&(Dt=new WeakMap);var Ft=0,kt="__immutablehash__";"function"==typeof Symbol&&(kt=Symbol(kt));var Wt=16,Vt=255,Gt=0,Bt={},Ht=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Xt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=Qt(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(pt);Ht.prototype[Q]=!0;var zt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&b(this),this._iter.__iterate(function(o){return t(o,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(J,e),o=0;return e&&b(this),new rt(function(){var i=r.next();return i.done?i:ot(t,e?n.size-++o:o++,i.value,i)})},e}(dt),qt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(J,e);return new rt(function(){var e=n.next();return e.done?e:ot(t,e.value,e.value,e)})},e}(vt),Kt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){ue(e);var r=L(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(J,e);return new rt(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){ue(r);var o=L(r);return ot(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}})},e}(pt);function Yt(t){var e=ce(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=fe,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===Z){var r=t.__iterator(e,n);return new rt(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===J?$:J,n)},e}function Qt(t,e,n){var r=ce(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var i=t.get(r,m);return i===m?o:e.call(n,i,r,t)},r.__iterateUncached=function(r,o){var i=this;return t.__iterate(function(t,o,a){return!1!==r(e.call(n,t,o,a),o,i)},o)},r.__iteratorUncached=function(r,o){var i=t.__iterator(Z,o);return new rt(function(){var o=i.next();if(o.done)return o;var a=o.value,u=a[0];return ot(r,u,e.call(n,a[1],u,t),o)})},r}function Xt(t,e){var n=this,r=ce(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=Yt(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=fe,r.__iterate=function(n,r){var o=this,i=0;return r&&b(t),t.__iterate(function(t,a){return n(t,e?a:r?o.size-++i:i++,o)},!r)},r.__iterator=function(r,o){var i=0;o&&b(t);var a=t.__iterator(Z,!o);return new rt(function(){var t=a.next();if(t.done)return t;var u=t.value;return ot(r,e?u[0]:o?n.size-++i:i++,u[1],t)})},r}function $t(t,e,n,r){var o=ce(t);return r&&(o.has=function(r){var o=t.get(r,m);return o!==m&&!!e.call(n,o,r,t)},o.get=function(r,o){var i=t.get(r,m);return i!==m&&e.call(n,i,r,t)?i:o}),o.__iterateUncached=function(o,i){var a=this,u=0;return t.__iterate(function(t,i,s){if(e.call(n,t,i,s))return u++,o(t,r?i:u-1,a)},i),u},o.__iteratorUncached=function(o,i){var a=t.__iterator(Z,i),u=0;return new rt(function(){for(;;){var i=a.next();if(i.done)return i;var s=i.value,c=s[0],f=s[1];if(e.call(n,f,c,t))return ot(o,r?c:u++,f,i)}})},o}function Jt(t,e,n,r){var o=t.size;if(R(e,n,o))return t;var i=N(e,o),a=C(n,o);if(i!=i||a!=a)return Jt(t.toSeq().cacheResult(),e,n,r);var u,s=a-i;s==s&&(u=s<0?0:s);var c=ce(t);return c.size=0===u?u:t.size&&u||void 0,!r&&z(t)&&u>=0&&(c.get=function(e,n){return(e=A(this,e))>=0&&e<u?t.get(e+i,n):n}),c.__iterateUncached=function(e,n){var o=this;if(0===u)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,s=!0,c=0;return t.__iterate(function(t,n){if(!s||!(s=a++<i))return c++,!1!==e(t,r?n:c-1,o)&&c!==u}),c},c.__iteratorUncached=function(e,n){if(0!==u&&n)return this.cacheResult().__iterator(e,n);if(0===u)return new rt(it);var o=t.__iterator(e,n),a=0,s=0;return new rt(function(){for(;a++<i;)o.next();if(++s>u)return{value:void 0,done:!0};var t=o.next();return r||e===J||t.done?t:ot(e,s-1,e===$?void 0:t.value[1],t)})},c}function Zt(t,e,n,r){var o=ce(t);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var u=!0,s=0;return t.__iterate(function(t,i,c){if(!u||!(u=e.call(n,t,i,c)))return s++,o(t,r?i:s-1,a)}),s},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var u=t.__iterator(Z,i),s=!0,c=0;return new rt(function(){var t,i,f;do{if((t=u.next()).done)return r||o===J?t:ot(o,c++,o===$?void 0:t.value[1],t);var h=t.value;i=h[0],f=h[1],s&&(s=e.call(n,f,i,a))}while(s);return o===Z?t:ot(o,i,f,t)})},o}function te(t,e){var n=D(t),r=[t].concat(e).map(function(t){return L(t)?n&&(t=V(t)):t=n?Et(t):mt(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var o=r[0];if(o===t||n&&D(o)||F(t)&&F(o))return o}var i=new yt(r);return n?i=i.toKeyedSeq():F(t)||(i=i.toSetSeq()),(i=i.flatten(!0)).size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),i}function ee(t,e,n){var r=ce(t);return r.__iterateUncached=function(o,i){if(i)return this.cacheResult().__iterate(o,i);var a=0,u=!1;return function t(s,c){s.__iterate(function(i,s){return(!e||c<e)&&L(i)?t(i,c+1):(a++,!1===o(i,n?s:a-1,r)&&(u=!0)),!u},i)}(t,0),a},r.__iteratorUncached=function(r,o){if(o)return this.cacheResult().__iterator(r,o);var i=t.__iterator(r,o),a=[],u=0;return new rt(function(){for(;i;){var t=i.next();if(!1===t.done){var s=t.value;if(r===Z&&(s=s[1]),e&&!(a.length<e)||!L(s))return n?t:ot(r,u++,s,t);a.push(i),i=s.__iterator(r,o)}else i=a.pop()}return{value:void 0,done:!0}})},r}function ne(t,e,n){e||(e=he);var r=D(t),o=0,i=t.toSeq().map(function(e,r){return[r,e,o++,n?n(e,r,t):e]}).valueSeq().toArray();return i.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?pt(i):F(t)?dt(i):vt(i)}function re(t,e,n){if(e||(e=he),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return oe(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return oe(e,t,n)?n:t})}function oe(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function ie(t,e,n,r){var o=ce(t),i=new yt(n).map(function(t){return t.size});return o.size=r?i.max():i.min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(J,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=n.map(function(t){return t=W(t),st(o?t.reverse():t)}),a=0,u=!1;return new rt(function(){var n;return u||(n=i.map(function(t){return t.next()}),u=r?n.every(function(t){return t.done}):n.some(function(t){return t.done})),u?{value:void 0,done:!0}:ot(t,a++,e.apply(null,n.map(function(t){return t.value})))})},o}function ae(t,e){return t===e?t:z(t)?e:t.constructor(e)}function ue(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function se(t){return D(t)?V:F(t)?G:B}function ce(t){return Object.create((D(t)?pt:F(t)?dt:vt).prototype)}function fe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):lt.prototype.cacheResult.call(this)}function he(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function le(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function pe(t,e){if(!t)throw new Error(e)}function de(t){pe(t!==1/0,"Cannot perform this action with an infinite size.")}function ve(t){if(ht(t)&&"string"!=typeof t)return t;if(X(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function ye(t){return t&&("function"!=typeof t.constructor||"Object"===t.constructor.name)}function ge(t){return"object"==typeof t&&(Y(t)||Array.isArray(t)||ye(t))}function _e(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function Ie(t,e){return Y(t)?t.has(e):ge(t)&&ft.call(t,e)}function we(t,e,n){return Y(t)?t.get(e,n):Ie(t,e)?"function"==typeof t.get?t.get(e):t[e]:n}function Ee(t){if(Array.isArray(t))return le(t);var e={};for(var n in t)ft.call(t,n)&&(e[n]=t[n]);return e}function me(t,e){if(!ge(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Y(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!ft.call(t,e))return t;var n=Ee(t);return Array.isArray(n)?n.splice(e,1):delete n[e],n}function Oe(t,e,n){if(!ge(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(Y(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,n)}if(ft.call(t,e)&&n===t[e])return t;var r=Ee(t);return r[e]=n,r}function Se(t,e,n,r){r||(r=n,n=void 0);var o=function t(e,n,r,o,i,a){var u=n===m;if(o===r.length){var s=u?i:n,c=a(s);return c===s?n:c}if(!u&&!ge(n))throw new TypeError("Cannot update within non-data-structure value in path ["+r.slice(0,o).map(_e)+"]: "+n);var f=r[o];var h=u?m:we(n,f,m);var l=t(h===m?e:Y(h),h,r,o+1,i,a);return l===h?n:l===m?me(n,f):Oe(u?e?on():{}:n,f,l)}(Y(t),t,ve(e),0,n,r);return o===m?n:o}function be(t,e,n){return Se(t,e,m,function(){return n})}function Ae(t,e){return be(this,t,e)}function Te(t,e){return Se(t,e,function(){return m})}function Re(t){return Te(this,t)}function Ne(t,e,n,r){return Se(t,[e],n,r)}function Ce(t,e,n){return 1===arguments.length?t(this):Ne(this,t,e,n)}function Me(t,e,n){return Se(this,t,e,n)}function Pe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Le(this,t)}function xe(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Le(this,e,t)}function Le(t,e,n){for(var r=[],o=0;o<e.length;o++){var i=V(e[o]);0!==i.size&&r.push(i)}return 0===r.length?t:0!==t.toSeq().size||t.__ownerID||1!==r.length?t.withMutations(function(t){for(var e=n?function(e,r){Ne(t,r,m,function(t){return t===m?e:n(t,e,r)})}:function(e,n){t.set(n,e)},o=0;o<r.length;o++)r[o].forEach(e)}):t.constructor(r[0])}function je(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Ue(t,e)}function De(t,e,n){return Ue(t,e,function(t){return function e(n,r,o){return ge(n)&&ge(r)?Ue(n,[r],e):t?t(n,r,o):r}}(n))}function Ue(t,e,n){if(!ge(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(Y(t))return"function"==typeof n&&t.mergeWith?t.mergeWith.apply(t,[n].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var r=Array.isArray(t),o=t,i=r?G:V,a=r?function(e){o===t&&(o=Ee(o)),o.push(e)}:function(e,r){var i=ft.call(o,r),a=i&&n?n(o[r],e,r):e;i&&a===o[r]||(o===t&&(o=Ee(o)),o[r]=a)},u=0;u<e.length;u++)i(e[u]).forEach(a);return o}function Fe(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return De(this,t)}function ke(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return De(this,e,t)}function We(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Se(this,t,on(),function(t){return Ue(t,e)})}function Ve(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Se(this,t,on(),function(t){return De(t,e)})}function Ge(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Be(){return this.__ownerID?this:this.__ensureOwner(new S)}function He(){return this.__ensureOwner()}function ze(){return this.__altered}zt.prototype.cacheResult=Ht.prototype.cacheResult=qt.prototype.cacheResult=Kt.prototype.cacheResult=fe;var qe=function(t){function e(e){return null==e?on():bt(e)&&!X(e)?e:on().withMutations(function(n){var r=t(e);de(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return on().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return an(this,t,e)},e.prototype.remove=function(t){return an(this,t,m)},e.prototype.deleteAll=function(t){var e=W(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):on()},e.prototype.sort=function(t){return Mn(ne(this,t))},e.prototype.sortBy=function(t,e){return Mn(ne(this,e,t))},e.prototype.map=function(t,e){return this.withMutations(function(n){n.forEach(function(r,o){n.set(o,t.call(e,r,o,n))})})},e.prototype.__iterator=function(t,e){return new tn(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?rn(this.size,this._root,t,this.__hash):0===this.size?on():(this.__ownerID=t,this.__altered=!1,this)},e}(V);qe.isMap=bt;var Ke=qe.prototype;Ke[St]=!0,Ke.delete=Ke.remove,Ke.removeAll=Ke.deleteAll,Ke.setIn=Ae,Ke.removeIn=Ke.deleteIn=Re,Ke.update=Ce,Ke.updateIn=Me,Ke.merge=Ke.concat=Pe,Ke.mergeWith=xe,Ke.mergeDeep=Fe,Ke.mergeDeepWith=ke,Ke.mergeIn=We,Ke.mergeDeepIn=Ve,Ke.withMutations=Ge,Ke.wasAltered=ze,Ke.asImmutable=He,Ke["@@transducer/init"]=Ke.asMutable=Be,Ke["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},Ke["@@transducer/result"]=function(t){return t.asImmutable()};var Ye=function(t,e){this.ownerID=t,this.entries=e};Ye.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Rt(n,o[i][0]))return o[i][1];return r},Ye.prototype.update=function(t,e,n,r,o,i,a){for(var u=o===m,s=this.entries,c=0,f=s.length;c<f&&!Rt(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===o:u)return this;if(O(a),(u||!h)&&O(i),!u||1!==s.length){if(!h&&!u&&s.length>=ln)return function(t,e,n,r){t||(t=new S);for(var o=new Je(t,Pt(n),[n,r]),i=0;i<e.length;i++){var a=e[i];o=o.update(t,0,void 0,a[0],a[1])}return o}(t,s,r,o);var l=t&&t===this.ownerID,p=l?s:le(s);return h?u?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,o]:p.push([r,o]),l?(this.entries=p,this):new Ye(t,p)}};var Qe=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};Qe.prototype.get=function(t,e,n,r){void 0===e&&(e=Pt(n));var o=1<<((0===t?e:e>>>t)&E),i=this.bitmap;return 0==(i&o)?r:this.nodes[fn(i&o-1)].get(t+I,e,n,r)},Qe.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=Pt(r));var u=(0===e?n:n>>>e)&E,s=1<<u,c=this.bitmap,f=0!=(c&s);if(!f&&o===m)return this;var h=fn(c&s-1),l=this.nodes,p=f?l[h]:void 0,d=un(p,t,e+I,n,r,o,i,a);if(d===p)return this;if(!f&&d&&l.length>=pn)return function(t,e,n,r,o){for(var i=0,a=new Array(w),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[i++]:void 0;return a[r]=o,new Xe(t,i+1,a)}(t,l,c,u,d);if(f&&!d&&2===l.length&&sn(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&sn(d))return d;var v=t&&t===this.ownerID,y=f?d?c:c^s:c|s,g=f?d?hn(l,h,d,v):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,a=0;a<r;a++)a===e&&(i=1),o[a]=t[a+i];return o}(l,h,v):function(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),a=0,u=0;u<o;u++)u===e?(i[u]=n,a=-1):i[u]=t[u+a];return i}(l,h,d,v);return v?(this.bitmap=y,this.nodes=g,this):new Qe(t,y,g)};var Xe=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};Xe.prototype.get=function(t,e,n,r){void 0===e&&(e=Pt(n));var o=(0===t?e:e>>>t)&E,i=this.nodes[o];return i?i.get(t+I,e,n,r):r},Xe.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=Pt(r));var u=(0===e?n:n>>>e)&E,s=o===m,c=this.nodes,f=c[u];if(s&&!f)return this;var h=un(f,t,e+I,n,r,o,i,a);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<dn)return function(t,e,n,r){for(var o=0,i=0,a=new Array(n),u=0,s=1,c=e.length;u<c;u++,s<<=1){var f=e[u];void 0!==f&&u!==r&&(o|=s,a[i++]=f)}return new Qe(t,o,a)}(t,c,l,u)}else l++;var p=t&&t===this.ownerID,d=hn(c,u,h,p);return p?(this.count=l,this.nodes=d,this):new Xe(t,l,d)};var $e=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};$e.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(Rt(n,o[i][0]))return o[i][1];return r},$e.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=Pt(r));var u=o===m;if(n!==this.keyHash)return u?this:(O(a),O(i),cn(this,t,e,n,[r,o]));for(var s=this.entries,c=0,f=s.length;c<f&&!Rt(r,s[c][0]);c++);var h=c<f;if(h?s[c][1]===o:u)return this;if(O(a),(u||!h)&&O(i),u&&2===f)return new Je(t,this.keyHash,s[1^c]);var l=t&&t===this.ownerID,p=l?s:le(s);return h?u?c===f-1?p.pop():p[c]=p.pop():p[c]=[r,o]:p.push([r,o]),l?(this.entries=p,this):new $e(t,this.keyHash,p)};var Je=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};Je.prototype.get=function(t,e,n,r){return Rt(n,this.entry[0])?this.entry[1]:r},Je.prototype.update=function(t,e,n,r,o,i,a){var u=o===m,s=Rt(r,this.entry[0]);return(s?o===this.entry[1]:u)?this:(O(a),u?void O(i):s?t&&t===this.ownerID?(this.entry[1]=o,this):new Je(t,this.keyHash,[r,o]):(O(i),cn(this,t,e,Pt(r),[r,o])))},Ye.prototype.iterate=$e.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},Qe.prototype.iterate=Xe.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},Je.prototype.iterate=function(t,e){return t(this.entry)};var Ze,tn=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&nn(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n=e.node,r=e.index++,o=void 0;if(n.entry){if(0===r)return en(t,n.entry)}else if(n.entries){if(r<=(o=n.entries.length-1))return en(t,n.entries[this._reverse?o-r:r])}else if(r<=(o=n.nodes.length-1)){var i=n.nodes[this._reverse?o-r:r];if(i){if(i.entry)return en(t,i.entry);e=this._stack=nn(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(rt);function en(t,e){return ot(t,e[0],e[1])}function nn(t,e){return{node:t,index:0,__prev:e}}function rn(t,e,n,r){var o=Object.create(Ke);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function on(){return Ze||(Ze=rn(0))}function an(t,e,n){var r,o;if(t._root){var i={value:!1},a={value:!1};if(r=un(t._root,t.__ownerID,0,void 0,e,n,i,a),!a.value)return t;o=t.size+(i.value?n===m?-1:1:0)}else{if(n===m)return t;o=1,r=new Ye(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?rn(o,r):on()}function un(t,e,n,r,o,i,a,u){return t?t.update(e,n,r,o,i,a,u):i===m?t:(O(u),O(a),new Je(e,r,[o,i]))}function sn(t){return t.constructor===Je||t.constructor===$e}function cn(t,e,n,r,o){if(t.keyHash===r)return new $e(e,r,[t.entry,o]);var i,a=(0===n?t.keyHash:t.keyHash>>>n)&E,u=(0===n?r:r>>>n)&E,s=a===u?[cn(t,e,n+I,r,o)]:(i=new Je(e,r,o),a<u?[t,i]:[i,t]);return new Qe(e,1<<a|1<<u,s)}function fn(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function hn(t,e,n,r){var o=r?t:le(t);return o[e]=n,o}var ln=w/4,pn=w/2,dn=w/4,vn="@@__IMMUTABLE_LIST__@@";function yn(t){return Boolean(t&&t[vn])}var gn=function(t){function e(e){var n=Sn();if(null==e)return n;if(yn(e))return e;var r=t(e),o=r.size;return 0===o?n:(de(o),o>0&&o<w?On(0,o,I,null,new In(r.toArray())):n.withMutations(function(t){t.setSize(o),r.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=A(this,t))>=0&&t<this.size){var n=Tn(this,t+=this._origin);return n&&n.array[t&E]}return e},e.prototype.set=function(t,e){return function(t,e,n){if((e=A(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Rn(t,e).set(0,n):Rn(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,o=t._root,i={value:!1};e>=Nn(t._capacity)?r=bn(r,t.__ownerID,0,e,n,i):o=bn(o,t.__ownerID,t._level,e,n,i);if(!i.value)return t;if(t.__ownerID)return t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t;return On(t._origin,t._capacity,t._level,o,r)}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=I,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Sn()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Rn(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return Rn(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Rn(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return Rn(this,1)},e.prototype.concat=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++){var o=e[r],i=t("string"!=typeof o&&at(o)?o:[o]);0!==i.size&&n.push(i)}return 0===n.length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(t){n.forEach(function(e){return e.forEach(function(e){return t.push(e)})})}):this.constructor(n[0])},e.prototype.setSize=function(t){return Rn(this,0,t)},e.prototype.map=function(t,e){var n=this;return this.withMutations(function(r){for(var o=0;o<n.size;o++)r.set(o,t.call(e,r.get(o),o,r))})},e.prototype.slice=function(t,e){var n=this.size;return R(t,e,n)?this:Rn(this,N(t,n),C(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=mn(this,e);return new rt(function(){var o=r();return o===En?{value:void 0,done:!0}:ot(t,e?--n:n++,o)})},e.prototype.__iterate=function(t,e){for(var n,r=e?this.size:0,o=mn(this,e);(n=o())!==En&&!1!==t(n,e?--r:r++,this););return r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?On(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?Sn():(this.__ownerID=t,this.__altered=!1,this)},e}(G);gn.isList=yn;var _n=gn.prototype;_n[vn]=!0,_n.delete=_n.remove,_n.merge=_n.concat,_n.setIn=Ae,_n.deleteIn=_n.removeIn=Re,_n.update=Ce,_n.updateIn=Me,_n.mergeIn=We,_n.mergeDeepIn=Ve,_n.withMutations=Ge,_n.wasAltered=ze,_n.asImmutable=He,_n["@@transducer/init"]=_n.asMutable=Be,_n["@@transducer/step"]=function(t,e){return t.push(e)},_n["@@transducer/result"]=function(t){return t.asImmutable()};var In=function(t,e){this.array=t,this.ownerID=e};In.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&E;if(r>=this.array.length)return new In([],t);var o,i=0===r;if(e>0){var a=this.array[r];if((o=a&&a.removeBefore(t,e-I,n))===a&&i)return this}if(i&&!o)return this;var u=An(this,t);if(!i)for(var s=0;s<r;s++)u.array[s]=void 0;return o&&(u.array[r]=o),u},In.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,o=n-1>>>e&E;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((r=i&&i.removeAfter(t,e-I,n))===i&&o===this.array.length-1)return this}var a=An(this,t);return a.array.splice(o+1),r&&(a.array[o]=r),a};var wn,En={};function mn(t,e){var n=t._origin,r=t._capacity,o=Nn(r),i=t._tail;return a(t._root,t._level,0);function a(t,u,s){return 0===u?function(t,a){var u=a===o?i&&i.array:t&&t.array,s=a>n?0:n-a,c=r-a;c>w&&(c=w);return function(){if(s===c)return En;var t=e?--c:s++;return u&&u[t]}}(t,s):function(t,o,i){var u,s=t&&t.array,c=i>n?0:n-i>>o,f=1+(r-i>>o);f>w&&(f=w);return function(){for(;;){if(u){var t=u();if(t!==En)return t;u=null}if(c===f)return En;var n=e?--f:c++;u=a(s&&s[n],o-I,i+(n<<o))}}}(t,u,s)}}function On(t,e,n,r,o,i,a){var u=Object.create(_n);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=o,u.__ownerID=i,u.__hash=a,u.__altered=!1,u}function Sn(){return wn||(wn=On(0,0,I))}function bn(t,e,n,r,o,i){var a,u=r>>>n&E,s=t&&u<t.array.length;if(!s&&void 0===o)return t;if(n>0){var c=t&&t.array[u],f=bn(c,e,n-I,r,o,i);return f===c?t:((a=An(t,e)).array[u]=f,a)}return s&&t.array[u]===o?t:(i&&O(i),a=An(t,e),void 0===o&&u===a.array.length-1?a.array.pop():a.array[u]=o,a)}function An(t,e){return e&&t&&e===t.ownerID?t:new In(t?t.array.slice():[],e)}function Tn(t,e){if(e>=Nn(t._capacity))return t._tail;if(e<1<<t._level+I){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&E],r-=I;return n}}function Rn(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new S,o=t._origin,i=t._capacity,a=o+e,u=void 0===n?i:n<0?i+n:o+n;if(a===o&&u===i)return t;if(a>=u)return t.clear();for(var s=t._level,c=t._root,f=0;a+f<0;)c=new In(c&&c.array.length?[void 0,c]:[],r),f+=1<<(s+=I);f&&(a+=f,o+=f,u+=f,i+=f);for(var h=Nn(i),l=Nn(u);l>=1<<s+I;)c=new In(c&&c.array.length?[c]:[],r),s+=I;var p=t._tail,d=l<h?Tn(t,u-1):l>h?new In([],r):p;if(p&&l>h&&a<i&&p.array.length){for(var v=c=An(c,r),y=s;y>I;y-=I){var g=h>>>y&E;v=v.array[g]=An(v.array[g],r)}v.array[h>>>I&E]=p}if(u<i&&(d=d&&d.removeAfter(r,0,u)),a>=l)a-=l,u-=l,s=I,c=null,d=d&&d.removeBefore(r,0,a);else if(a>o||l<h){for(f=0;c;){var _=a>>>s&E;if(_!==l>>>s&E)break;_&&(f+=(1<<s)*_),s-=I,c=c.array[_]}c&&a>o&&(c=c.removeBefore(r,s,a-f)),c&&l<h&&(c=c.removeAfter(r,s,l-f)),f&&(a-=f,u-=f)}return t.__ownerID?(t.size=u-a,t._origin=a,t._capacity=u,t._level=s,t._root=c,t._tail=d,t.__hash=void 0,t.__altered=!0,t):On(a,u,s,c,d)}function Nn(t){return t<w?0:t-1>>>I<<I}var Cn,Mn=function(t){function e(t){return null==t?xn():At(t)?t:xn().withMutations(function(e){var n=V(t);de(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):xn()},e.prototype.set=function(t,e){return Ln(this,t,e)},e.prototype.remove=function(t){return Ln(this,t,m)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Pn(e,n,t,this.__hash):0===this.size?xn():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(qe);function Pn(t,e,n,r){var o=Object.create(Mn.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function xn(){return Cn||(Cn=Pn(on(),Sn()))}function Ln(t,e,n){var r,o,i=t._map,a=t._list,u=i.get(e),s=void 0!==u;if(n===m){if(!s)return t;a.size>=w&&a.size>=2*i.size?(r=(o=a.filter(function(t,e){return void 0!==t&&u!==e})).toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=o.__ownerID=t.__ownerID)):(r=i.remove(e),o=u===a.size-1?a.pop():a.set(u,void 0))}else if(s){if(n===a.get(u)[1])return t;r=i,o=a.set(u,[e,n])}else r=i.set(e,a.size),o=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=o,t.__hash=void 0,t):Pn(r,o)}Mn.isOrderedMap=At,Mn.prototype[Q]=!0,Mn.prototype.delete=Mn.prototype.remove;var jn="@@__IMMUTABLE_STACK__@@";function Dn(t){return Boolean(t&&t[jn])}var Un=function(t){function e(t){return null==t?Vn():Dn(t)?t:Vn().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=A(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Wn(e,n)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Dn(e))return e;de(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Wn(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Vn()},e.prototype.slice=function(e,n){if(R(e,n,this.size))return this;var r=N(e,this.size);if(C(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var o=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=o,this._head=i,this.__hash=void 0,this.__altered=!0,this):Wn(o,i)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Wn(this.size,this._head,t,this.__hash):0===this.size?Vn():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new yt(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,o=this._head;o&&!1!==t(o.value,r++,this);)o=o.next;return r},e.prototype.__iterator=function(t,e){if(e)return new yt(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new rt(function(){if(r){var e=r.value;return r=r.next,ot(t,n++,e)}return{value:void 0,done:!0}})},e}(G);Un.isStack=Dn;var Fn,kn=Un.prototype;function Wn(t,e,n,r){var o=Object.create(kn);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Vn(){return Fn||(Fn=Wn(0))}kn[jn]=!0,kn.shift=kn.pop,kn.unshift=kn.push,kn.unshiftAll=kn.pushAll,kn.withMutations=Ge,kn.wasAltered=ze,kn.asImmutable=He,kn["@@transducer/init"]=kn.asMutable=Be,kn["@@transducer/step"]=function(t,e){return t.unshift(e)},kn["@@transducer/result"]=function(t){return t.asImmutable()};var Gn="@@__IMMUTABLE_SET__@@";function Bn(t){return Boolean(t&&t[Gn])}function Hn(t){return Bn(t)&&X(t)}function zn(t,e){if(t===e)return!0;if(!L(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||D(t)!==D(e)||F(t)!==F(e)||X(t)!==X(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!k(t);if(X(t)){var r=t.entries();return e.every(function(t,e){var o=r.next().value;return o&&Rt(o[1],t)&&(n||Rt(o[0],e))})&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var a=!0,u=e.__iterate(function(e,r){if(n?!t.has(e):o?!Rt(e,t.get(r,m)):!Rt(t.get(r,m),e))return a=!1,!1});return a&&t.size===u}function qn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Kn(t){if(!t||"object"!=typeof t)return t;if(!L(t)){if(!ge(t))return t;t=lt(t)}if(D(t)){var e={};return t.__iterate(function(t,n){e[n]=Kn(t)}),e}var n=[];return t.__iterate(function(t){n.push(Kn(t))}),n}var Yn=function(t){function e(e){return null==e?Zn():Bn(e)&&!X(e)?e:Zn().withMutations(function(n){var r=t(e);de(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(V(t).keySeq())},e.intersect=function(t){return(t=W(t).toArray()).length?Xn.intersect.apply(e(t.pop()),t):Zn()},e.union=function(t){return(t=W(t).toArray()).length?Xn.union.apply(e(t.pop()),t):Zn()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return $n(this,this._map.set(t,t))},e.prototype.remove=function(t){return $n(this,this._map.remove(t))},e.prototype.clear=function(){return $n(this,this._map.clear())},e.prototype.map=function(t,e){var n=this,r=[],o=[];return this.forEach(function(i){var a=t.call(e,i,i,n);a!==i&&(r.push(i),o.push(a))}),this.withMutations(function(t){r.forEach(function(e){return t.remove(e)}),o.forEach(function(e){return t.add(e)})})},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.sort=function(t){return gr(ne(this,t))},e.prototype.sortBy=function(t,e){return gr(ne(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(B);Yn.isSet=Bn;var Qn,Xn=Yn.prototype;function $n(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Jn(t,e){var n=Object.create(Xn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Zn(){return Qn||(Qn=Jn(on()))}Xn[Gn]=!0,Xn.delete=Xn.remove,Xn.merge=Xn.concat=Xn.union,Xn.withMutations=Ge,Xn.asImmutable=He,Xn["@@transducer/init"]=Xn.asMutable=Be,Xn["@@transducer/step"]=function(t,e){return t.add(e)},Xn["@@transducer/result"]=function(t){return t.asImmutable()},Xn.__empty=Zn,Xn.__make=Jn;var tr,er=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(pe(0!==r,"Cannot step a Range by 0"),t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-t)/r-1)+1),0===this.size){if(tr)return tr;tr=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return R(t,n,this.size)?this:(t=N(t,this.size),(n=C(n,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;i!==n&&!1!==t(o,e?n-++i:i++,this);)o+=e?-r:r;return i},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,o=e?this._start+(n-1)*r:this._start,i=0;return new rt(function(){if(i===n)return{value:void 0,done:!0};var a=o;return o+=e?-r:r,ot(t,e?n-++i:i++,a)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:zn(this,t)},e}(dt);function nr(t,e,n){for(var r=ve(e),o=0;o!==r.length;)if((t=we(t,r[o++],m))===m)return n;return t}function rr(t,e){return nr(this,t,e)}function or(t,e){return nr(t,e,m)!==m}function ir(){de(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t}W.isIterable=L,W.isKeyed=D,W.isIndexed=F,W.isAssociative=k,W.isOrdered=X,W.Iterator=rt,qn(W,{toArray:function(){de(this.size);var t=new Array(this.size||0),e=D(this),n=0;return this.__iterate(function(r,o){t[n++]=e?[o,r]:r}),t},toIndexedSeq:function(){return new zt(this)},toJS:function(){return Kn(this)},toKeyedSeq:function(){return new Ht(this,!0)},toMap:function(){return qe(this.toKeyedSeq())},toObject:ir,toOrderedMap:function(){return Mn(this.toKeyedSeq())},toOrderedSet:function(){return gr(D(this)?this.valueSeq():this)},toSet:function(){return Yn(D(this)?this.valueSeq():this)},toSetSeq:function(){return new qt(this)},toSeq:function(){return F(this)?this.toIndexedSeq():D(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Un(D(this)?this.valueSeq():this)},toList:function(){return gn(D(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return ae(this,te(this,t))},includes:function(t){return this.some(function(e){return Rt(e,t)})},entries:function(){return this.__iterator(Z)},every:function(t,e){de(this.size);var n=!0;return this.__iterate(function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1}),n},filter:function(t,e){return ae(this,$t(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return de(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){de(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""}),e},keys:function(){return this.__iterator($)},map:function(t,e){return ae(this,Qt(this,t,e))},reduce:function(t,e,n){return cr(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return cr(this,t,e,n,arguments.length<2,!0)},reverse:function(){return ae(this,Xt(this,!0))},slice:function(t,e){return ae(this,Jt(this,t,e,!0))},some:function(t,e){return!this.every(lr(t),e)},sort:function(t){return ae(this,ne(this,t))},values:function(){return this.__iterator(J)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return b(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=qe().asMutable();return t.__iterate(function(o,i){r.update(e.call(n,o,i,t),0,function(t){return t+1})}),r.asImmutable()}(this,t,e)},equals:function(t){return zn(this,t)},entrySeq:function(){var t=this;if(t._cache)return new yt(t._cache);var e=t.toSeq().map(hr).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(lr(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(T,null,t)},flatMap:function(t,e){return ae(this,function(t,e,n){var r=se(t);return t.toSeq().map(function(o,i){return r(e.call(n,o,i,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return ae(this,ee(this,t,!0))},fromEntrySeq:function(){return new Kt(this)},get:function(t,e){return this.find(function(e,n){return Rt(n,t)},void 0,e)},getIn:rr,groupBy:function(t,e){return function(t,e,n){var r=D(t),o=(X(t)?Mn():qe()).asMutable();t.__iterate(function(i,a){o.update(e.call(n,i,a,t),function(t){return(t=t||[]).push(r?[a,i]:i),t})});var i=se(t);return o.map(function(e){return ae(t,i(e))}).asImmutable()}(this,t,e)},has:function(t){return this.get(t,m)!==m},hasIn:function(t){return or(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:W(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:W(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Rt(e,t)})},keySeq:function(){return this.toSeq().map(fr).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return re(this,t)},maxBy:function(t,e){return re(this,e,t)},min:function(t){return re(this,t?pr(t):vr)},minBy:function(t,e){return re(this,e?pr(e):vr,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return ae(this,Zt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(lr(t),e)},sortBy:function(t,e){return ae(this,ne(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return ae(this,function(t,e,n){var r=ce(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return t.__iterate(function(t,o,u){return e.call(n,t,o,u)&&++a&&r(t,o,i)}),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(Z,o),u=!0;return new rt(function(){if(!u)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var o=t.value,s=o[0],c=o[1];return e.call(n,c,s,i)?r===Z?t:ot(r,s,c,t):(u=!1,{value:void 0,done:!0})})},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(lr(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=X(t),n=D(t),r=e?1:0;return function(t,e){return e=Nt(e,3432918353),e=Nt(e<<15|e>>>-15,461845907),e=Nt(e<<13|e>>>-13,5),e=Nt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=Ct((e=Nt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+yr(Pt(t),Pt(e))|0}:function(t,e){r=r+yr(Pt(t),Pt(e))|0}:e?function(t){r=31*r+Pt(t)|0}:function(t){r=r+Pt(t)|0}),r)}(this))}});var ar=W.prototype;ar[x]=!0,ar[nt]=ar.values,ar.toJSON=ar.toArray,ar.__toStringMapper=_e,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,qn(V,{flip:function(){return ae(this,Yt(this))},mapEntries:function(t,e){var n=this,r=0;return ae(this,this.toSeq().map(function(o,i){return t.call(e,[i,o],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return ae(this,this.toSeq().flip().map(function(r,o){return t.call(e,r,o,n)}).flip())}});var ur=V.prototype;ur[j]=!0,ur[nt]=ar.entries,ur.toJSON=ir,ur.__toStringMapper=function(t,e){return _e(e)+": "+_e(t)},qn(G,{toKeyedSeq:function(){return new Ht(this,!1)},filter:function(t,e){return ae(this,$t(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return ae(this,Xt(this,!1))},slice:function(t,e){return ae(this,Jt(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=N(t,t<0?this.count():this.size);var r=this.slice(0,t);return ae(this,1===n?r:r.concat(le(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return ae(this,ee(this,t,!1))},get:function(t,e){return(t=A(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=A(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ae(this,function(t,e){var n=ce(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate(function(t){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)},r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(J,r),a=0;return new rt(function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?ot(n,a++,e):ot(n,a++,o.value,o)})},n}(this,t))},interleave:function(){var t=[this].concat(le(arguments)),e=ie(this.toSeq(),dt.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),ae(this,n)},keySeq:function(){return er(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return ae(this,Zt(this,t,e,!1))},zip:function(){var t=[this].concat(le(arguments));return ae(this,ie(this,dr,t))},zipAll:function(){var t=[this].concat(le(arguments));return ae(this,ie(this,dr,t,!0))},zipWith:function(t){var e=le(arguments);return e[0]=this,ae(this,ie(this,t,e))}});var sr=G.prototype;function cr(t,e,n,r,o,i){return de(t.size),t.__iterate(function(t,i,a){o?(o=!1,n=t):n=e.call(r,n,t,i,a)},i),n}function fr(t,e){return e}function hr(t,e){return[e,t]}function lr(t){return function(){return!t.apply(this,arguments)}}function pr(t){return function(){return-t.apply(this,arguments)}}function dr(){return le(arguments)}function vr(t,e){return t<e?1:t>e?-1:0}function yr(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}sr[U]=!0,sr[Q]=!0,qn(B,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),B.prototype.has=ar.includes,B.prototype.contains=B.prototype.includes,qn(pt,V.prototype),qn(dt,G.prototype),qn(vt,B.prototype);var gr=function(t){function e(t){return null==t?Er():Hn(t)?t:Er().withMutations(function(e){var n=B(t);de(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(V(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Yn);gr.isOrderedSet=Hn;var _r,Ir=gr.prototype;function wr(t,e){var n=Object.create(Ir);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Er(){return _r||(_r=wr(xn()))}Ir[Q]=!0,Ir.zip=sr.zip,Ir.zipWith=sr.zipWith,Ir.__empty=Er,Ir.__make=wr;var mr=function(t,e){var n,r=function(i){var a=this;if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var u=Object.keys(t),s=o._indices={};o._name=e,o._keys=u,o._defaultValues=t;for(var c=0;c<u.length;c++){var f=u[c];s[f]=c,o[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+br(this)+' with property "'+f+'" since that property name is part of the Record API.'):Tr(o,f)}}this.__ownerID=void 0,this._values=gn().withMutations(function(t){t.setSize(a._keys.length),V(i).forEach(function(e,n){t.set(a._indices[n],e===a._defaultValues[n]?void 0:e)})})},o=r.prototype=Object.create(Or);return o.constructor=r,e&&(r.displayName=e),r};mr.prototype.toString=function(){for(var t,e=br(this)+" { ",n=this._keys,r=0,o=n.length;r!==o;r++)e+=(r?", ":"")+(t=n[r])+": "+_e(this.get(t));return e+" }"},mr.prototype.equals=function(t){return this===t||t&&this._keys===t._keys&&Ar(this).equals(Ar(t))},mr.prototype.hashCode=function(){return Ar(this).hashCode()},mr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},mr.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},mr.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return Sr(this,n)}return this},mr.prototype.remove=function(t){return this.set(t)},mr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:Sr(this,t)},mr.prototype.wasAltered=function(){return this._values.wasAltered()},mr.prototype.toSeq=function(){return Ar(this)},mr.prototype.toJS=function(){return Kn(this)},mr.prototype.entries=function(){return this.__iterator(Z)},mr.prototype.__iterator=function(t,e){return Ar(this).__iterator(t,e)},mr.prototype.__iterate=function(t,e){return Ar(this).__iterate(t,e)},mr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?Sr(this,e,t):(this.__ownerID=t,this._values=e,this)},mr.isRecord=K,mr.getDescriptiveName=br;var Or=mr.prototype;function Sr(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function br(t){return t.constructor.displayName||t.constructor.name||"Record"}function Ar(t){return Et(t._keys.map(function(e){return[e,t.get(e)]}))}function Tr(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){pe(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}Or[q]=!0,Or.delete=Or.remove,Or.deleteIn=Or.removeIn=Re,Or.getIn=rr,Or.hasIn=ar.hasIn,Or.merge=Pe,Or.mergeWith=xe,Or.mergeIn=We,Or.mergeDeep=Fe,Or.mergeDeepWith=ke,Or.mergeDeepIn=Ve,Or.setIn=Ae,Or.update=Ce,Or.updateIn=Me,Or.withMutations=Ge,Or.asMutable=Be,Or.asImmutable=He,Or[nt]=Or.entries,Or.toJSON=Or.toObject=ar.toObject,Or.inspect=Or.toSource=function(){return this.toString()};function Rr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.ADD_COMPANION_WINDOW:return be(t,[e.id],e.payload);case g.ADD_WINDOW:return e.companionWindows.reduce(function(t,e){return t[e.id]=e,t},t);case g.REMOVE_WINDOW:return e.companionWindowIds.reduce(function(t,e){return Te(t,[e])},t);case g.UPDATE_COMPANION_WINDOW:return Se(t,[e.id],function(t){return je(t,e.payload)});case g.REMOVE_COMPANION_WINDOW:return Te(t,[e.id]);case g.IMPORT_MIRADOR_STATE:return e.state.companionWindows;default:return t}}var Nr=n(6),Cr=n.n(Nr),Mr=n(106),Pr=n.n(Mr),xr={items:[]},Lr=function(){var t,e,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case g.ADD_ERROR:return f()({},o,(t={},l()(t,i.id,{id:i.id,message:i.message}),l()(t,"items",[].concat(Cr()(o.items),[i.id])),t));case g.RECEIVE_INFO_RESPONSE_FAILURE:return f()({},o,(e={},l()(e,i.infoId,{id:i.infoId,message:i.error}),l()(e,"items",[].concat(Cr()(o.items),[i.infoId])),e));case g.RECEIVE_SEARCH_FAILURE:return f()({},o,(n={},l()(n,i.searchId,{id:i.searchId,message:i.error}),l()(n,"items",[].concat(Cr()(o.items),[i.searchId])),n));case g.REMOVE_ERROR:return(r=Object.keys(o).reduce(function(t,e){return e!==i.id&&(t[e]=o[e]),t},{})).items=Pr()(r.items,i.id),r;case g.IMPORT_MIRADOR_STATE:return xr;default:return o}},jr=n(4),Dr=n.n(jr);function Ur(t){return void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height}function Fr(t,e){return e.x-e.width/2>t.x-t.width/2&&e.y-e.height/2>t.y-t.height/2&&e.x+e.width/2<t.x+t.width/2&&e.y+e.height/2<t.y+t.height/2}var kr=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggingEnabled:!0,exposeModeOn:!1,height:5e3,id:Dr()(),viewportPosition:{x:0,y:0},width:5e3},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case g.FOCUS_WINDOW:return f()({},n,{focusedWindowId:r.windowId,viewportPosition:f()({},n.viewportPosition,r.position)});case g.ADD_WINDOW:return f()({},n,{focusedWindowId:r.window.id});case g.REMOVE_WINDOW:return Object.keys(r.windows).length>2?n:f()({},n,{focusedWindowId:Object.keys(r.windows).find(function(t){return t!==r.windowId})});case g.SET_WORKSPACE_FULLSCREEN:return f()({},n,{isFullscreenEnabled:r.isFullscreenEnabled});case g.TOGGLE_ZOOM_CONTROLS:return f()({},n,{showZoomControls:r.showZoomControls});case g.UPDATE_WORKSPACE_MOSAIC_LAYOUT:return f()({},n,{layout:r.layout});case g.SET_WORKSPACE_ADD_VISIBILITY:return f()({},n,{isWorkspaceAddVisible:r.isWorkspaceAddVisible});case g.SET_WORKSPACE_VIEWPORT_POSITION:return t={},Ur(e=f()({},n.viewportPosition,r.payload.position))&&!Fr({height:n.height,width:n.width,x:0,y:0},e)&&(t={height:2*n.height,width:2*n.width}),f()({},n,t,{viewportPosition:e});case g.TOGGLE_WORKSPACE_EXPOSE_MODE:return f()({},n,{exposeModeOn:!n.exposeModeOn});case g.IMPORT_MIRADOR_STATE:return r.state.workspace;case g.TOGGLE_DRAGGING:return f()({},n,{draggingEnabled:!n.draggingEnabled});default:return n}},Wr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.ADD_WINDOW:return f()({},t,l()({},e.window.id,e.window));case g.MAXIMIZE_WINDOW:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{maximized:!0})));case g.MINIMIZE_WINDOW:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{maximized:!1})));case g.UPDATE_WINDOW:return Se(t,[e.id],function(t){return je(t,e.payload)});case g.REMOVE_WINDOW:return Object.keys(t).reduce(function(n,r){return r!==e.windowId&&(n[r]=t[r]),n},{});case g.TOGGLE_WINDOW_SIDE_BAR:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{sideBarOpen:!t[e.windowId].sideBarOpen})));case g.SET_WINDOW_VIEW_TYPE:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{view:e.viewType})));case g.SET_WINDOW_SIDE_BAR_PANEL:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{sideBarPanel:e.panelType})));case g.UPDATE_WINDOW_POSITION:return f()({},t,l()({},e.payload.windowId,f()({},t[e.payload.windowId],{x:e.payload.position.x,y:e.payload.position.y})));case g.SET_WINDOW_SIZE:return f()({},t,l()({},e.payload.windowId,f()({},t[e.payload.windowId],{height:e.payload.size.height,width:e.payload.size.width,x:e.payload.size.x,y:e.payload.size.y})));case g.SET_CANVAS:return Se(t,[e.windowId],function(t){return je(t,{canvasIndex:e.canvasIndex,selectedContentSearchAnnotation:e.selectedContentSearchAnnotation})});case g.ADD_COMPANION_WINDOW:if("left"===e.payload.position){var n=t[e.windowId].companionWindowIds,r=e.companionWindows,o=n.filter(function(t){return r[t].position!==e.payload.position});return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{companionAreaOpen:!0,companionWindowIds:o.concat([e.id]),sideBarPanel:e.payload.content})))}return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{companionWindowIds:t[e.windowId].companionWindowIds.concat([e.id])})));case g.UPDATE_COMPANION_WINDOW:return"left"!==e.payload.position?t:f()({},t,l()({},e.windowId,f()({},t[e.windowId],{companionAreaOpen:!0})));case g.REMOVE_COMPANION_WINDOW:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{companionWindowIds:t[e.windowId].companionWindowIds.filter(function(t){return t!==e.id})})));case g.SELECT_CONTENT_SEARCH_ANNOTATION:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{canvasIndex:e.canvasIndex,selectedContentSearchAnnotation:e.annotationId})));case g.SELECT_ANNOTATION:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{selectedAnnotations:f()({},t[e.windowId].selectedAnnotations,l()({},e.targetId,[].concat(Cr()((t[e.windowId].selectedAnnotations||{})[e.targetId]||[]),[e.annotationId])))})));case g.DESELECT_ANNOTATION:var i=Vr(t,e);return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{selectedAnnotations:i})));case g.HIGHLIGHT_ANNOTATION:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{highlightedAnnotation:e.annotationId})));case g.TOGGLE_ANNOTATION_DISPLAY:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{displayAllAnnotations:!t[e.windowId].displayAllAnnotations})));case g.IMPORT_MIRADOR_STATE:return e.state.windows;case g.REQUEST_SEARCH:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{suggestedSearches:void 0})));case g.RECEIVE_SEARCH:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],{canvasIndex:e.canvasIndex||t[e.windowId].canvasIndex,selectedContentSearchAnnotation:e.annotationId&&[e.annotationId]||t[e.windowId].selectedContentSearchAnnotation})));default:return t}};function Vr(t,e){var n=t[e.windowId].selectedAnnotations[e.targetId].filter(function(t){return t!==e.annotationId});return n.length>0?f()({},t[e.windowId].selectedAnnotations,l()({},e.targetId,n)):me(t[e.windowId].selectedAnnotations,e.targetId)}var Gr=n(107),Br=n.n(Gr),Hr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.REQUEST_MANIFEST:return f()(l()({},e.manifestId,f()({},t[e.manifestId],e.properties,{id:e.manifestId})),Br()(t,e.manifestId));case g.RECEIVE_MANIFEST:return f()({},t,l()({},e.manifestId,f()({},t[e.manifestId],{error:null,id:e.manifestId,isFetching:!1,json:e.manifestJson})));case g.RECEIVE_MANIFEST_FAILURE:return f()({},t,l()({},e.manifestId,f()({},t[e.manifestId],{error:e.error,id:e.manifestId,isFetching:!1})));case g.REMOVE_MANIFEST:return Object.keys(t).reduce(function(n,r){return r!==e.manifestId&&(n[r]=t[r]),n},{});case g.IMPORT_MIRADOR_STATE:return{};default:return t}},zr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.REQUEST_INFO_RESPONSE:return f()({},t,l()({},e.infoId,{id:e.infoId,isFetching:!0}));case g.RECEIVE_INFO_RESPONSE:return f()({},t,l()({},e.infoId,{degraded:!(e.ok&&d()(e.infoId,{stripAuthentication:!1})===d()(e.infoJson["@id"],{stripAuthentication:!1})),id:e.infoId,isFetching:!1,json:e.infoJson}));case g.RECEIVE_INFO_RESPONSE_FAILURE:return f()({},t,l()({},e.infoId,{error:e.error,id:e.infoId,isFetching:!1}));case g.REMOVE_INFO_RESPONSE:return Object.keys(t).reduce(function(n,r){return r!==e.infoId&&(n[r]=t[r]),n},{});case g.IMPORT_MIRADOR_STATE:return{};default:return t}},qr=n(41),Kr=n.n(qr),Yr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.UPDATE_CONFIG:case g.IMPORT_CONFIG:return Kr()(t,e.config);case g.SET_CONFIG:return e.config;case g.IMPORT_MIRADOR_STATE:return e.state.config;default:return t}},Qr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.UPDATE_VIEWPORT:return f()({},t,l()({},e.windowId,f()({},e.payload)));case g.REMOVE_WINDOW:return Object.keys(t).reduce(function(n,r){return r!==e.windowId&&(n[r]=t[r]),n},{});case g.IMPORT_MIRADOR_STATE:return e.state.viewers;default:return t}},Xr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.REQUEST_ANNOTATION:return f()({},t,l()({},e.targetId,l()({},e.annotationId,{id:e.annotationId,isFetching:!0})));case g.RECEIVE_ANNOTATION:return f()({},t,l()({},e.targetId,l()({},e.annotationId,{id:e.annotationId,isFetching:!1,json:e.annotationJson})));case g.RECEIVE_ANNOTATION_FAILURE:return f()({},t,l()({},e.targetId,l()({},e.annotationId,{error:e.error,id:e.annotationId,isFetching:!1})));case g.IMPORT_MIRADOR_STATE:return{};default:return t}};function $r(t,e){return t===e}function Jr(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}function Zr(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every(function(t){return"function"==typeof t})){var n=e.map(function(t){return typeof t}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return e}var to=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];var i=0,a=r.pop(),u=Zr(r),s=t.apply(void 0,[function(){return i++,a.apply(null,arguments)}].concat(n)),c=t(function(){for(var t=[],e=u.length,n=0;n<e;n++)t.push(u[n].apply(null,arguments));return s.apply(null,t)});return c.resultFunc=a,c.dependencies=u,c.recomputations=function(){return i},c.resetRecomputations=function(){return i=0},c}}(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$r,n=null,r=null;return function(){return Jr(e,n,arguments)||(r=t.apply(null,arguments)),n=arguments,r}});var eo=n(12),no=n.n(eo),ro=n(13),oo=n.n(ro),io=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";no()(this,t),this.canvases=e,this.viewType=n,this._groupings=null}return oo()(t,[{key:"getCanvases",value:function(t){switch(this.viewType){case"book":return this.groupings()[Math.ceil(t/2)];default:return this.groupings()[t]}}},{key:"groupings",value:function(){if(this._groupings)return this._groupings;if("book"!==this.viewType)return this.canvases.map(function(t){return[t]});var t=[];return this.canvases.forEach(function(e,n){0!==n?n%2!=0?t.push([e]):t[Math.ceil(n/2)].push(e):t.push([e])}),this._groupings=t,t}}]),t}(),ao=n(11),uo=n.n(ao),so=n(3),co=n.n(so);var fo=to([function(t,e){var n=e.manifestId,r=e.windowId;return t.manifests&&t.manifests[n||r&&t.windows&&t.windows[r]&&t.windows[r].manifestId]},function(t,e){var n=e.companionWindowId;return n&&t.companionWindows[n]&&t.companionWindows[n].locale||t.config&&t.config.language}],function(t,e){return t&&t.json&&y.a.create(t.json,e?{locale:e}:void 0)}),ho=to([fo],function(t){return t&&t.options&&t.options.locale&&t.options.locale.replace(/-.*$/,"")});function lo(t){return to([fo],function(e){return e&&e.getProperty(t)})}to([fo],function(t){return t&&t.getLogo()}),to([lo("provider"),ho],function(t,e){return t&&t[0].label&&v.LanguageMap.parse(t[0].label,e).map(function(t){return t.value})[0]});function po(t){return Array.isArray(t)?t:[t]}to([lo("homepage"),ho],function(t,e){return t&&po(t).map(function(t){return{label:v.LanguageMap.parse(t.label,e).map(function(t){return t.value})[0],value:t.id||t["@id"]}})}),to([fo],function(t){return t&&t.getRenderings().map(function(t){return{label:t.getLabel().map(function(t){return t.value})[0],value:t.id}})}),to([lo("seeAlso"),ho],function(t,e){return t&&po(t).map(function(t){return{format:t.format,label:v.LanguageMap.parse(t.label,e).map(function(t){return t.value})[0],value:t.id||t["@id"]}})}),to([fo],function(t){return t&&po(t.getRequiredStatement()).filter(function(t){return t.getValue()}).map(function(t){return{label:t.getLabel(),value:t.getValue()}})}),to([lo("rights"),lo("license"),ho],function(t,e,n){var r=t||e;return po(v.LanguageMap.parse(r,n).map(function(t){return t.value}))});to([fo],function(t){return t&&t.getSequences&&t.getSequences()[0]?t.getSequences()[0].getCanvases():[]}),to([fo],function(t){return t&&t.getLabel().map(function(t){return t.value})[0]}),to([fo],function(t){return t&&t.getDescription().map(function(t){return t.value})[0]}),to([fo],function(t){return t&&t.id});to([fo],function(t){return t&&((e=t)&&e.getMetadata().map(function(t){return{label:t.getLabel(),value:t.getValue()}}));var e});function vo(t){var e=[];return Array.isArray(t)?e.push.apply(e,Cr()(t.filter(function(t){return"object"===uo()(t)&&t["@language"]}).map(function(t){return t["@language"]}))):"object"===uo()(t)&&t["@language"]&&e.push(t["@language"]),e}to([fo],function(t){return function(t){if(!t)return[];for(var e=t.getProperty("metadata")||[],n={},r=0;r<e.length;r+=1){var o=e[r];vo(o.label).forEach(function(t){n[t]=!0}),vo(o.value).forEach(function(t){n[t]=!0})}return Object.keys(n)}(t)});var yo=to([fo],function(t){if(!t)return 0;var e;if(!(e=t.getSequences()[0].getProperty("startCanvas"))){var n=t.getProperty("start")||t.getSequences()[0].getProperty("start");e=n&&(n.id||n.source)}return(e&&t.getSequences()[0].getCanvasById(e)||{}).index}),go=to([fo],function(t){if(!t)return null;var e=t.getSequences()[0].getViewingHint()||t.getViewingHint();return e?e.value:null}),_o=to([fo],function(t){if(!t)return null;var e=t.getService("http://iiif.io/api/search/0/search")||t.getService("http://iiif.io/api/search/1/search");return e||null});to([_o],function(t){var e=t&&(t.getService("http://iiif.io/api/search/0/autocomplete")||t.getService("http://iiif.io/api/search/1/autocomplete"));return e&&e});function Io(t){return t.config||{}}to([Io],function(t){var e=t.availableLanguages,n=t.language;return Object.keys(e).map(function(t){return{current:t===n,label:e[t],locale:t}})}),to([function(t){return t.workspace},Io],function(t,e){return void 0===t.showZoomControls?e.workspace.showZoomControls:t.showZoomControls}),to([Io],function(t){var e=t.theme,n=t.themes,r=t.selectedTheme;return Kr()(e,n[r]||{})}),to([Io],function(t){var e=t.themes;return Object.keys(e)});var wo=to([Io],function(t){return t.workspace.type}),Eo=(to([Io],function(t){return t.id}),to([Io],function(t){var e=t.window;return e&&e.defaultView}));function mo(t){return t.windows||{}}to([mo],function(t){return Object.keys(t)}),to([mo],function(t){return Object.values(t).filter(function(t){return!0===t.maximized}).map(function(t){return t.id})});function Oo(t,e){var n=e.windowId;return mo(t)[n]}var So=to([Oo,function(t,e){return e.canvasIndex},yo],function(t,e,n){return void 0!==e?e:t&&void 0!==t.canvasIndex?t.canvasIndex:n||0}),bo=to([Oo,go,Eo],function(t,e,n){return t&&t.view||{individuals:"single",paged:"book"}[e]||n}),Ao=(to([function(t){return t.viewers},function(t,e){return e.windowId}],function(t,e){return t[e]}),to([wo,Oo,function(t){return Object.keys(t.windows).length>1}],function(t,e,n){return"elastic"===t||n&&e&&!1===e.maximized}),to([fo],function(t){return t&&t.getSequences()[0].getCanvases()})),To=to([fo,So,function(t,e){return e.canvasId}],function(t,e,n){if(t)return void 0!==n?t.getSequences()[0].getCanvasById(n):t.getSequences()[0].getCanvasByIndex(e)}),Ro=to([Ao,So,bo],function(t,e,n){return t&&new io(t,n).getCanvases(e)}),No=(to([To],function(t){return t&&(t.getLabel().length>0?t.getLabel().map(function(t){return t.value})[0]:String(t.index+1))}),to([To],function(t){return t&&t.getProperty("description")}),to([To,function(t){return t.infoResponses}],function(t,e){return t&&t.getImages()[0]&&e[t.getImages()[0].getResource().getServices()[0].id]&&!e[t.getImages()[0].getResource().getServices()[0].id].isFetching&&e[t.getImages()[0].getResource().getServices()[0].id]})),Co={clickthrough:!0,external:!0,kiosk:!0,login:!0};function Mo(t,e){var n=t.auth,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Co,o=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/external");if(o){if(!n[o.id])return r.external&&o;if(n[o.id].isFetching||n[o.id].ok)return null}var i=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/kiosk");if(i){if(!n[i.id])return r.kiosk&&i;if(n[i.id].isFetching||n[i.id].ok)return null}var a=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/clickthrough");if(a){if(!n[a.id])return r.clickthrough&&a;if(n[a.id].isFetching||n[a.id].ok)return null}var u=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/login");return u&&!n[u.id]?r.login&&u:null}to([No,function(t){return t}],function(t,e){var n=t&&t.json;if(n)return Mo(e,n)||function(t,e){var n=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/login");if(Po(t,n))return n;var r=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/clickthrough");if(Po(t,r))return r;var o=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/kiosk");if(Po(t,o))return o;var i=v.Utils.getService(f()({},e,{options:{}}),"http://iiif.io/api/auth/1/external");return Po(t,i)?i:null}(e,n)});function Po(t,e){var n=t.auth;return e&&n[e.id]?n[e.id].isFetching?"fetching":n[e.id].ok?"ok":"failed":null}var xo=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case g.RECEIVE_INFO_RESPONSE:return n.ok&&d()(n.infoId,{stripAuthentication:!1})===d()(n.infoJson["@id"],{stripAuthentication:!1})?e:!(t=Mo({auth:e},n.infoJson,{external:!0,kiosk:!0}))||e[t.id]?e:f()({},e,l()({},t.id,{id:t.id,infoId:[].concat(e[t.id]&&e[t.id].infoId||[],n.infoId),isFetching:!0,profile:t.getProfile()}));case g.ADD_AUTHENTICATION_REQUEST:return f()({},e,l()({},n.id,{id:n.id,infoId:[].concat(e[n.id]&&e[n.id].infoId||[],n.infoId),isFetching:!0}));case g.RESOLVE_AUTHENTICATION_REQUEST:return f()({},e,l()({},n.id,{id:n.id,isFetching:!1,ok:n.ok}));default:return e}},Lo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case g.ADD_WINDOW:return f()({},t,l()({},e.window.id,f()({windowId:e.window.id},e.elasticLayout)));case g.UPDATE_ELASTIC_WINDOW_LAYOUT:return Se(t,[e.windowId],function(t){return je(t,e.payload)});case g.REMOVE_WINDOW:return Object.keys(t).reduce(function(n,r){return r!==e.windowId&&(n[r]=t[r]),n},{});case g.IMPORT_MIRADOR_STATE:return e.state.elasticLayout;default:return t}},jo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=(t[e.windowId]||{})[e.companionWindowId]||{};switch(e.type){case g.REQUEST_SEARCH:return n.query!==e.query?f()({},t,l()({},e.windowId,f()({},t[e.windowId],l()({},e.companionWindowId,f()({},n,{data:l()({},e.searchId,{isFetching:!0}),query:e.query,selectedContentSearchAnnotation:[]}))))):f()({},t,l()({},e.windowId,f()({},t[e.windowId],l()({},e.companionWindowId,f()({},n,{data:f()({},n.data,l()({},e.searchId,{isFetching:!0}))})))));case g.RECEIVE_SEARCH:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],l()({},e.companionWindowId,f()({},n,{data:f()({},n.data,l()({},e.searchId,{isFetching:!1,json:e.searchJson})),selectedContentSearchAnnotation:n.selectedContentSearchAnnotation&&n.selectedContentSearchAnnotation.length>0?n.selectedContentSearchAnnotation:e.annotationId&&[e.annotationId]})))));case g.RECEIVE_SEARCH_FAILURE:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],l()({},e.companionWindowId,f()({},n,{data:f()({},n.data,l()({},e.searchId,{error:e.error,isFetching:!1}))})))));case g.REMOVE_SEARCH:return f()({},t,l()({},e.windowId,Object.keys(t[e.windowId]).reduce(function(n,r){return r!==e.companionWindowId&&(n[r]=t[e.windowId][r]),n},{})));case g.SELECT_CONTENT_SEARCH_ANNOTATION:return f()({},t,l()({},e.windowId,f()({},t[e.windowId],l()({},e.companionWindowId,f()({},n,{selectedContentSearchAnnotation:e.annotationId})))));case g.SET_CANVAS:return 0===Object.keys(e.searches).length?t:f()({},t,l()({},e.windowId,Object.keys(t[e.windowId]).reduce(function(n,r){return Object.keys(e.searches).includes(r)&&(n[r]=f()({},t[e.windowId][r],{selectedContentSearchAnnotation:e.searches[r]})),n},{})));case g.IMPORT_MIRADOR_STATE:return{};case g.REMOVE_WINDOW:return Te(t,[e.windowId]);case g.REMOVE_COMPANION_WINDOW:return t[e.windowId]?f()({},t,l()({},e.windowId,f()({},Te(t[e.windowId],[e.id])))):t;default:return t}};var Do=n(28),Uo=n.n(Do),Fo=n(43),ko=n.n(Fo),Wo=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};no()(this,t),this.resource=e}return oo()(t,[{key:"id",get:function(){return this._id=this._id||this.resource["@id"]||Dr()(),this._id}},{key:"targetId",get:function(){var t=this.on[0];switch(uo()(t)){case"string":return t.replace(/#?xywh=(.*)$/,"");case"object":return t.full.replace(/#?xywh=(.*)$/,"");default:return null}}},{key:"motivations",get:function(){return co()(ko()(new Array(this.resource.motivation)))}},{key:"resources",get:function(){return co()(ko()(new Array(this.resource.resource)))}},{key:"on",get:function(){return co()(ko()(new Array(this.resource.on)))}},{key:"chars",get:function(){return this.resources.map(function(t){return t.chars}).join(" ")}},{key:"selector",get:function(){var t=this.on[0];switch(uo()(t)){case"string":return t;case"object":return"oa:Choice"===t.selector["@type"]?t.selector.default:t.selector;default:return null}}},{key:"fragmentSelector",get:function(){var t=this.selector;switch(uo()(t)){case"string":return t.match(/xywh=(.*)$/)[1].split(",").map(function(t){return parseInt(t,10)});case"object":return t.value.match(/xywh=(.*)$/)[1].split(",").map(function(t){return parseInt(t,10)});default:return null}}}]),t}(),Vo=function(){function t(e,n){no()(this,t),this.json=e,this.target=n}return oo()(t,[{key:"present",value:function(){return this.resources&&this.resources.length>0}},{key:"id",get:function(){return this.json["@id"]}},{key:"resources",get:function(){return this.json&&this.json.resources?co()([this.json.resources]).map(function(t){return new Wo(t)}):[]}}]),t}(),Go=to([To,function(t){return t.annotations}],function(t,e){return e&&t&&e[t.id]?co()(Object.values(e[t.id])):[]}),Bo=to([Go],function(t){return Uo()(Object.values(t).map(function(t){return t&&new Vo(t.json)}),function(t){return t&&t.present()})}),Ho=to([Ro,function(t){return t.annotations}],function(t,e){return e&&t?co()(t.map(function(t){return t.id}).map(function(t){return e[t]&&Object.values(e[t])})):[]}),zo=to([Ho],function(t){return Uo()(Object.values(t).map(function(t){return t&&new Vo(t.json)}),function(t){return t&&t.present()})}),qo=(to([Bo,function(t,e){return e.motivations}],function(t,e){return Uo()(co()(t.map(function(t){return t.resources})),function(t){return t.motivations.some(function(t){return e.includes(t)})})}),to([zo,function(t,e){return e.motivations}],function(t,e){return Uo()(co()(t.map(function(t){return t.resources})),function(t){return t.motivations.some(function(t){return e.includes(t)})})}),to([function(t,e){var n=e.windowId;return t.windows[n].selectedAnnotations},Ro],function(t,e){return co()(e.map(function(t){return t.id}).map(function(e){return t&&t[e]}))})),Ko=(to([zo,qo],function(t,e){return t.map(function(t){return{id:t["@id"]||t.id,resources:t.resources.filter(function(t){return e&&e.includes(t.id)})}}).filter(function(t){return t.resources.length>0})}),to([zo,function(t,e){var n=e.windowId;return t.windows[n].highlightedAnnotation},function(t,e){var n=e.windowId;return t.windows[n].displayAllAnnotations}],function(t,e,n){return n?t:e?t.map(function(t){return{id:t["@id"]||t.id,resources:t.resources.filter(function(t){return e&&e===t.id})}}).filter(function(t){return t.resources.length>0}):[]}),n(64)),Yo=n.n(Ko);function Qo(t){return t.companionWindows}to([Oo,function(t){return t.companionWindows}],function(t,e){return t&&e[t.thumbnailNavigationId]&&e[t.thumbnailNavigationId].position});var Xo=to([mo,Qo],function(t,e){return(Object.keys(t)||[]).reduce(function(n,r){return f()({},n,l()({},r,Yo()(t[r].companionWindowIds,function(t){return e[t]&&e[t].position})))},{})}),$o=to([mo,Qo],function(t,e){return(Object.keys(t)||[]).reduce(function(n,r){return f()({},n,l()({},r,Yo()(t[r].companionWindowIds.map(function(t){return e[t]}),function(t){return t.position})))},{})}),Jo=(to([Qo,function(t,e){return e.companionWindowId}],function(t,e){return t[e]}),to([function(t,e){return e.windowId},$o],function(t,e){return e[t]||{}})),Zo=to([function(t,e){return e.windowId},Xo],function(t,e){return e[t]||{}}),ti=(to([Jo,function(t,e){return{position:e.position}}],function(t,e){return t[e.position]||ti}),[]),ei=to([Zo,function(t,e){return{position:e.position}}],function(t,e){return t[e.position]||ti});to([function(t,e){return e.position},Oo],function(t,e){if(!e)return!1;var n=e.companionAreaOpen,r=e.sideBarOpen;return"left"!==t||!(!n||!r)}),to([Jo],function(t){var e,n=0,r=0;return(e=[]).concat.apply(e,Cr()(Object.values(t))).forEach(function(t){t.position.match(/right/)&&(n+=235),t.position.match(/bottom/)&&(r+=201)}),{height:r,width:n}});to([function(t){return t.workspace}],function(t){return t.isFullscreenEnabled});var ni=to([function(t,e){return e.windowId},function(t){return t.searches}],function(t,e){return t&&e?e[t]:{}}),ri=to([ni,function(t,e){return e.companionWindowId}],function(t,e){if(t&&e)return t[e]}),oi=to([ri],function(t){return t?Object.values(t.data):[]}),ii=(to([ri],function(t){return t&&t.query}),to([oi],function(t){return t.some(function(t){return t.isFetching})}),to([ri],function(t){if(t&&t.data){var e=Object.values(t.data).find(function(e){return!e.isFetching&&e.json&&e.json.next&&!t.data[e.json.next]});return e&&e.json&&e.json.next}}),to([oi],function(t){return co()(t.map(function(t){return t&&t.json&&!t.isFetching&&t.json.hits?t.json.hits:[]}))})),ai=(to([ii,Ao,function(t,e){var n=e.companionWindowId,r=e.windowId;return function(e){return hi(t,{annotationUri:e,companionWindowId:n,windowId:r})}}],function(t,e,n){if(!e||0===e.length)return[];if(!t||0===t.length)return[];var r=e.map(function(t){return t.id});return[].concat(t).sort(function(t,e){var o=n(t.annotations[0]),i=n(e.annotations[0]);return r.indexOf(o.targetId)-r.indexOf(i.targetId)})}),function(t){var e=t.map(function(t){if(t&&t.json&&!t.isFetching&&t.json.resources){var e=new Vo(t.json);return{id:e.id,resources:e.resources}}}).filter(function(t){return t});return{id:(e.find(function(t){return t.id})||{}).id,resources:co()(e.map(function(t){return t.resources}))}}),ui=to([oi],function(t){return t&&ai(t)});function si(t,e){if(!t||!t.resources||0===t.length)return[];if(!e||0===e.length)return[];var n=e.map(function(t){return t.id});return[].concat(t.resources).sort(function(t,e){return n.indexOf(t.targetId)-n.indexOf(e.targetId)})}to([ui,Ao],function(t,e){return si(t,e)});var ci=to([ni],function(t){return t?Object.values(t).map(function(t){return Object.values(t.data)}).map(function(t){return ai(t)}).filter(function(t){return t.resources.length>0}):[]}),fi=to([Oo,ri],function(t,e){return e&&e.selectedContentSearchAnnotation||t&&t.selectedContentSearchAnnotation||[]}),hi=(to([ci,fi],function(t,e){return t.map(function(t){return{id:t["@id"]||t.id,resources:t.resources.filter(function(t){return e&&e.includes(t.id)})}}).filter(function(t){return t.resources.length>0})}),to([ui,function(t,e){return e.annotationUri}],function(t,e){return t.resources.find(function(t){return t.id===e})})),li=(to([hi,ho],function(t,e){return t&&t.resource&&t.resource.label?v.LanguageMap.parse(t.resource.label,e).map(function(t){return t.value}):[]}),to([ci,function(t,e){return e.annotationId}],function(t,e){return co()(t.map(function(t){return t.resources})).find(function(t){return t.id===e})})),pi=to([li,function(t,e){var n=e.windowId;return function(e){return To(t,{canvasId:e,windowId:n})}}],function(t,e){var n=t&&t.targetId;return n&&e(n)}),di={content:null,position:null};function vi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di;return function(r,o){var i=o().companionWindows,a="cw-".concat(Dr()());r({companionWindows:i,id:a,payload:f()({},n,e,{id:a}),type:g.ADD_COMPANION_WINDOW,windowId:t})}}function yi(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di;return function(r,o){var i=o(),a=e.position,u="left"===a&&ei(i,{position:a,windowId:t})[0];r(u?gi(t,u,e):vi(t,e,n))}}function gi(t,e,n){return{id:e,payload:n,type:g.UPDATE_COMPANION_WINDOW,windowId:t}}function _i(t,e){return{id:e,type:g.REMOVE_COMPANION_WINDOW,windowId:t}}function Ii(t){return{config:t,type:g.IMPORT_CONFIG}}function wi(t){return{config:t,type:g.SET_CONFIG}}function Ei(t){return{config:t,type:g.UPDATE_CONFIG}}function mi(t){return{state:f()({},t,{workspace:f()({},t.workspace,{id:Dr()()})}),type:g.IMPORT_MIRADOR_STATE}}function Oi(t){return{id:"error-".concat(Dr()()),message:t,type:g.ADD_ERROR}}function Si(t){return{id:t,type:g.REMOVE_ERROR}}var bi=n(42),Ai=n.n(bi);function Ti(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){var o,i=r(),a=i.elasticLayout,u=i.workspace;if(e){var s=a[t],c=s.x,f=s.y,h=s.width,l=s.height,p=u.viewportPosition;o={x:c+h/2-p.width/2,y:f+l/2-p.height/2}}else o={};n({position:o,type:g.FOCUS_WINDOW,windowId:t})}}function Ri(t){var e=t.companionWindows,n=Ai()(t,["companionWindows"]);return function(t,r){var o=r(),i=o.config,a=o.windows,u=Object.keys(a).length,s="cw-".concat(Dr()()),c="cw-".concat(Dr()()),h=(e||[]).map(function(t){return"cw-".concat(Dr()())}),l={canvasIndex:void 0,collectionIndex:0,companionAreaOpen:!0,companionWindowIds:[s,c].concat(Cr()(h)),displayAllAnnotations:i.displayAllAnnotations||!1,draggingEnabled:!0,id:"window-".concat(Dr()()),layoutOrder:u+1,manifestId:null,maximized:!1,rangeId:null,rotation:null,selectedAnnotations:{},sideBarOpen:i.window.sideBarOpenByDefault,sideBarPanel:i.window.defaultSideBarPanel,thumbnailNavigationId:c},p={height:400,width:400,x:50*Math.floor(u/10)+30*u%300+200,y:200+50*u%300};t({companionWindows:[{content:i.window.defaultSideBarPanel,default:!0,id:s,position:"left"},{content:"thumbnailNavigation",default:!0,id:c,position:n.thumbnailNavigationPosition||i.thumbnailNavigation.defaultPosition}].concat(Cr()((e||[]).map(function(t,e){return f()({},t,{id:h[e]})}))),elasticLayout:p,type:g.ADD_WINDOW,window:f()({},l,n)})}}function Ni(t,e){return{type:g.MAXIMIZE_WINDOW,windowId:t}}function Ci(t){return{type:g.MINIMIZE_WINDOW,windowId:t}}function Mi(t,e){return{id:t,payload:e,type:g.UPDATE_WINDOW}}function Pi(t,e){return{id:t,payload:{companionAreaOpen:e},type:g.UPDATE_WINDOW}}function xi(t){return function(e,n){var r=n().windows;e({companionWindowIds:r[t].companionWindowIds,type:g.REMOVE_WINDOW,windowId:t,windows:r})}}function Li(t){return{type:g.TOGGLE_WINDOW_SIDE_BAR,windowId:t}}function ji(t,e){return function(n,r){n({id:r().windows[t].thumbnailNavigationId,payload:{position:e},type:g.UPDATE_COMPANION_WINDOW})}}function Di(t,e){return{type:g.SET_WINDOW_VIEW_TYPE,viewType:e,windowId:t}}var Ui=n(14),Fi=n.n(Ui);function ki(t,e){return{manifestId:t,properties:e,type:g.REQUEST_MANIFEST}}function Wi(t,e){return{manifestId:t,manifestJson:e,type:g.RECEIVE_MANIFEST}}function Vi(t,e){return{error:e,manifestId:t,type:g.RECEIVE_MANIFEST_FAILURE}}function Gi(t,e){return function(n,r){n(ki(t,f()({},e,{isFetching:!0})));var o=r().config,i=void 0===o?{}:o;return Fi()(t,{headers:i.resourceHeaders}).then(function(t){return t.json()}).then(function(e){return n(Wi(t,e))}).catch(function(e){"object"===uo()(e)?n(Vi(t,String(e))):n(Vi(t,e))})}}function Bi(t){return{manifestId:t,type:g.REMOVE_MANIFEST}}function Hi(t){return{infoId:t,type:g.REQUEST_INFO_RESPONSE}}function zi(t,e,n){return{infoId:t,infoJson:e,ok:n,type:g.RECEIVE_INFO_RESPONSE}}function qi(t,e){return{error:e,infoId:t,type:g.RECEIVE_INFO_RESPONSE_FAILURE}}function Ki(t){var e=t.imageId,n=t.imageResource;return function(t,r){var o=r(),i=e||"".concat(n.getServices()[0].id.replace(/\/$/,"")),a={},u=i&&o.infoResponses&&o.infoResponses[i]&&!o.infoResponses[i].isFetching&&o.infoResponses[i].json,s=function(t,e){var n=t.accessTokens;if(e)for(var r=v.Utils.getServices(e).filter(function(t){return t.getProfile().value.match(/http:\/\/iiif.io\/api\/auth\/1\//)}),o=0;o<r.length;o+=1){var i=r[o],a=n[v.Utils.getService(i,"http://iiif.io/api/auth/1/token").id];if(a&&a.json)return a.json.accessToken}}(r(),u||n&&n.getServices()[0]);return s&&(a.Authorization="Bearer ".concat(s)),t(Hi(i)),Fi()("".concat(i,"/info.json"),{headers:a}).then(function(t){return t.json().then(function(e){return{json:e,ok:t.ok}})}).then(function(e){var n=e.json,r=e.ok;return t(zi(i,n,r))}).catch(function(e){return t(qi(i,e))})}}function Yi(t){return{infoId:t,type:g.REMOVE_INFO_RESPONSE}}function Qi(t,e){return function(n,r){var o=r(),i=Ro(o,{canvasIndex:e,windowId:t}).map(function(t){return t.id}),a=ni(o,{windowId:t})||{},u=Object.keys(a).reduce(function(e,n){var r=ui(o,{companionWindowId:n,windowId:t}).resources.find(function(t){return i.includes(t.targetId)});return r&&(e[n]=[r.id]),e},{}),s=Object.values(u),c={canvasIndex:e,searches:u,type:g.SET_CANVAS,windowId:t};s.length>0&&(c.selectedContentSearchAnnotation=s[0]),n(c)}}function Xi(t,e){return{payload:e,type:g.UPDATE_VIEWPORT,windowId:t}}function $i(t){return{isFullscreenEnabled:t,type:g.SET_WORKSPACE_FULLSCREEN}}function Ji(t){return{showZoomControls:t,type:g.TOGGLE_ZOOM_CONTROLS}}function Zi(t){return{layout:t,type:g.UPDATE_WORKSPACE_MOSAIC_LAYOUT}}function ta(t){return{isWorkspaceAddVisible:t,type:g.SET_WORKSPACE_ADD_VISIBILITY}}function ea(t){return{payload:{position:{x:t.x,y:t.y}},type:g.SET_WORKSPACE_VIEWPORT_POSITION}}function na(t){var e=t.width;return{payload:{position:{height:t.height,width:e}},type:g.SET_WORKSPACE_VIEWPORT_POSITION}}function ra(){return{type:g.TOGGLE_WORKSPACE_EXPOSE_MODE}}function oa(){return{type:g.TOGGLE_DRAGGING}}function ia(t,e){return{annotationId:e,targetId:t,type:g.REQUEST_ANNOTATION}}function aa(t,e,n){return{annotationId:e,annotationJson:n,targetId:t,type:g.RECEIVE_ANNOTATION}}function ua(t,e,n){return{annotationId:e,error:n,targetId:t,type:g.RECEIVE_ANNOTATION_FAILURE}}function sa(t,e){return function(n){return n(ia(t,e)),Fi()(e).then(function(t){return t.json()}).then(function(r){return n(aa(t,e,r))}).catch(function(r){return n(ua(t,e,r))})}}function ca(t,e,n){return{annotationId:n,targetId:e,type:g.SELECT_ANNOTATION,windowId:t}}function fa(t,e,n){return{annotationId:n,targetId:e,type:g.DESELECT_ANNOTATION,windowId:t}}function ha(t){return{type:g.TOGGLE_ANNOTATION_DISPLAY,windowId:t}}function la(t,e){return{annotationId:e,type:g.HIGHLIGHT_ANNOTATION,windowId:t}}function pa(t,e,n){return{id:n,infoId:e,type:g.ADD_AUTHENTICATION_REQUEST,windowId:t}}function da(t){return function(e,n){var r=n().auth;e(_a(t,r[t].infoId))}}function va(t,e,n){return{authId:e,infoIds:n,serviceId:t,type:g.REQUEST_ACCESS_TOKEN}}function ya(t,e){return{json:e,serviceId:t,type:g.RECEIVE_ACCESS_TOKEN}}function ga(t,e){return{error:e,serviceId:t,type:g.RECEIVE_ACCESS_TOKEN_FAILURE}}function _a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(r,o){var i=o().infoResponses[e[0]].json,a=(n||v.Utils.getServices(i)).find(function(e){return e.id===t});return a?(r(va(v.Utils.getService(a,"http://iiif.io/api/auth/1/token").id,a.id,e)),null):null}}function Ia(t){var e=t.messageId,n=Ai()(t,["messageId"]);return function(t,r){var o=r().accessTokens[e],i=o.authId,a=o.infoIds;t({id:i,ok:!!n.accessToken,type:g.RESOLVE_AUTHENTICATION_REQUEST}),n.accessToken?(t(ya(e,n)),a.forEach(function(e){return t(Ki({imageId:e}))})):t(ga(e,n))}}function wa(t,e){return{payload:e,type:g.UPDATE_ELASTIC_WINDOW_LAYOUT,windowId:t}}function Ea(t,e,n,r){return{companionWindowId:e,query:r,searchId:n,type:g.REQUEST_SEARCH,windowId:t}}function ma(t,e,n,r){return function(o,i){var a,u,s=i();if(0===fi(s,{companionWindowId:e,windowId:t}).length){var c=Ao(s,{windowId:t});u=(a=si(new Vo(r),c)[0])&&To(s,{canvasId:a.targetId,windowId:t})}o({annotationId:a&&a.id,canvasIndex:u&&u.index,companionWindowId:e,searchId:n,searchJson:r,type:g.RECEIVE_SEARCH,windowId:t})}}function Oa(t,e,n,r){return{companionWindowId:e,error:r,searchId:n,type:g.RECEIVE_SEARCH_FAILURE,windowId:t}}function Sa(t,e){return{companionWindowId:e,type:g.REMOVE_SEARCH,windowId:t}}function ba(t,e,n,r){return function(o){return o(Ea(t,e,n,r)),Fi()(n).then(function(t){return t.json()}).then(function(r){return o(ma(t,e,n,r))}).catch(function(r){return o(Oa(t,e,n,r))})}}function Aa(t,e,n){return function(r,o){var i=o(),a=pi(i,{annotationId:n[0],companionWindowId:e,windowId:t});r({annotationId:n,canvasIndex:a&&a.index,companionWindowId:e,type:g.SELECT_CONTENT_SEARCH_ANNOTATION,windowId:t})}}n.d(e,"store",function(){return Ra}),n.d(e,"actions",function(){return r});var Ta,Ra=Object(u.createStore)(function(t){return Object(u.combineReducers)(f()({accessTokens:_,annotations:Xr,auth:xo,companionWindows:Rr,config:Yr,elasticLayout:Lo,errors:Lr,infoResponses:zr,manifests:Hr,searches:jo,viewers:Qr,windows:Wr,workspace:kr},t))}(Ta),Object(s.composeWithDevTools)(Object(u.applyMiddleware)(a)))}])});